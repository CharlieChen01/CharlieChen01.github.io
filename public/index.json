[{"content":"åœ¨ GStreamer ä¸­ï¼Œdeinterlaceï¼ˆåœºå¸§å¤„ç†ï¼‰ã€videorateï¼ˆå¸§ç‡è½¬æ¢ï¼‰å’Œ videocropï¼ˆè§†é¢‘æˆªå–ï¼‰æ˜¯å¤„ç†è§†é¢‘æµçš„é‡è¦å…ƒç´ ï¼š\ndeinterlaceï¼ˆåœºå¸§å¤„ç†ï¼‰: åŠŸèƒ½: deinterlace å…ƒç´ ç”¨äºå°†äº¤é”™è§†é¢‘å¸§è½¬æ¢ä¸ºé€è¡Œæ‰«æçš„è§†é¢‘å¸§ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°ä¸åŒçš„ç®—æ³•ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ï¼Œä»¥æä¾›ä¸åŒçš„è´¨é‡å’Œ CPU ä½¿ç”¨ç‡ 1ã€‚ ä½¿ç”¨ç¤ºä¾‹:\ngst-launch-1.0 -v filesrc location=/path/to/file ! decodebin ! videoconvert ! deinterlace ! videoconvert ! autovideosink\nè¿™ä¸ªç®¡é“ä½¿ç”¨é»˜è®¤çš„å»äº¤é”™é€‰é¡¹å»äº¤é”™è§†é¢‘æ–‡ä»¶ã€‚\nvideorateï¼ˆå¸§ç‡è½¬æ¢ï¼‰: åŠŸèƒ½: videorate å…ƒç´ æ¥æ”¶ä¸€ä¸ªå¸¦æœ‰æ—¶é—´æˆ³çš„è§†é¢‘å¸§æµï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªä¸æºç«¯å£å¸§ç‡åŒ¹é…çš„å®Œç¾æµã€‚å®ƒé€šè¿‡ä¸¢å¼ƒå’Œå¤åˆ¶å¸§æ¥è¿›è¡Œæ ¡æ­£ï¼Œç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨å¤æ‚ç®—æ³•æ¥æ’å€¼å¸§ 2ã€‚ ä½¿ç”¨ç¤ºä¾‹:\ngst-launch-1.0 -v uridecodebin uri=file:///path/to/video.ogg ! videoconvert ! videoscale ! videorate ! video/x-raw,framerate=15/1 ! autovideosink\nè¿™ä¸ªç®¡é“è§£ç è§†é¢‘æ–‡ä»¶å¹¶å°†å¸§ç‡è°ƒæ•´ä¸º 15fps å†æ’­æ”¾ã€‚\nvideocropï¼ˆè§†é¢‘æˆªå–ï¼‰: åŠŸèƒ½: videocrop å…ƒç´ ç”¨äºè£å‰ªè§†é¢‘å¸§ï¼Œå³å®ƒå¯ä»¥ç§»é™¤å›¾åƒå·¦ä¾§ã€å³ä¾§ã€é¡¶éƒ¨æˆ–åº•éƒ¨çš„éƒ¨åˆ†ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæ¯”è¾“å…¥å›¾åƒå°çš„å›¾åƒï¼Œå»é™¤äº†è¾¹ç¼˜ä¸éœ€è¦çš„éƒ¨åˆ† 3ã€‚ ä½¿ç”¨ç¤ºä¾‹:\ngst-launch-1.0 -v videotestsrc ! videocrop top=42 left=1 right=4 bottom=0 ! ximagesink\nè¿™ä¸ªç®¡é“ä»æµ‹è¯•è§†é¢‘æºè£å‰ªå‡ºä¸€éƒ¨åˆ†å¹¶æ˜¾ç¤ºã€‚\nè¿™äº›å…ƒç´ åœ¨è§†é¢‘å¤„ç†ä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç”¨äºè§†é¢‘ç¼–è¾‘ã€æ ¼å¼è½¬æ¢æˆ–æµåª’ä½“ä¼ è¾“ç­‰å¤šç§åœºæ™¯ã€‚\n","permalink":"http://localhost:1313/posts/media/about-gstreamer-miscdeinterlace-videorate-videocrop/","summary":"åœ¨ GStreamer ä¸­ï¼Œdeinterlaceï¼ˆåœºå¸§å¤„ç†ï¼‰ã€videorateï¼ˆå¸§ç‡è½¬æ¢ï¼‰å’Œ videocropï¼ˆè§†é¢‘æˆªå–ï¼‰æ˜¯å¤„ç†è§†é¢‘æµçš„é‡è¦å…ƒç´ ï¼š\ndeinterlaceï¼ˆåœºå¸§å¤„ç†ï¼‰: åŠŸèƒ½: deinterlace å…ƒç´ ç”¨äºå°†äº¤é”™è§†é¢‘å¸§è½¬æ¢ä¸ºé€è¡Œæ‰«æçš„è§†é¢‘å¸§ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°ä¸åŒçš„ç®—æ³•ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ï¼Œä»¥æä¾›ä¸åŒçš„è´¨é‡å’Œ CPU ä½¿ç”¨ç‡ 1ã€‚ ä½¿ç”¨ç¤ºä¾‹:\ngst-launch-1.0 -v filesrc location=/path/to/file ! decodebin ! videoconvert ! deinterlace ! videoconvert ! autovideosink\nè¿™ä¸ªç®¡é“ä½¿ç”¨é»˜è®¤çš„å»äº¤é”™é€‰é¡¹å»äº¤é”™è§†é¢‘æ–‡ä»¶ã€‚\nvideorateï¼ˆå¸§ç‡è½¬æ¢ï¼‰: åŠŸèƒ½: videorate å…ƒç´ æ¥æ”¶ä¸€ä¸ªå¸¦æœ‰æ—¶é—´æˆ³çš„è§†é¢‘å¸§æµï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªä¸æºç«¯å£å¸§ç‡åŒ¹é…çš„å®Œç¾æµã€‚å®ƒé€šè¿‡ä¸¢å¼ƒå’Œå¤åˆ¶å¸§æ¥è¿›è¡Œæ ¡æ­£ï¼Œç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨å¤æ‚ç®—æ³•æ¥æ’å€¼å¸§ 2ã€‚ ä½¿ç”¨ç¤ºä¾‹:\ngst-launch-1.0 -v uridecodebin uri=file:///path/to/video.ogg ! videoconvert ! videoscale ! videorate ! video/x-raw,framerate=15/1 ! autovideosink\nè¿™ä¸ªç®¡é“è§£ç è§†é¢‘æ–‡ä»¶å¹¶å°†å¸§ç‡è°ƒæ•´ä¸º 15fps å†æ’­æ”¾ã€‚\nvideocropï¼ˆè§†é¢‘æˆªå–ï¼‰: åŠŸèƒ½: videocrop å…ƒç´ ç”¨äºè£å‰ªè§†é¢‘å¸§ï¼Œå³å®ƒå¯ä»¥ç§»é™¤å›¾åƒå·¦ä¾§ã€å³ä¾§ã€é¡¶éƒ¨æˆ–åº•éƒ¨çš„éƒ¨åˆ†ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæ¯”è¾“å…¥å›¾åƒå°çš„å›¾åƒï¼Œå»é™¤äº†è¾¹ç¼˜ä¸éœ€è¦çš„éƒ¨åˆ† 3ã€‚ ä½¿ç”¨ç¤ºä¾‹:\ngst-launch-1.0 -v videotestsrc ! videocrop top=42 left=1 right=4 bottom=0 ! ximagesink\nè¿™ä¸ªç®¡é“ä»æµ‹è¯•è§†é¢‘æºè£å‰ªå‡ºä¸€éƒ¨åˆ†å¹¶æ˜¾ç¤ºã€‚\nè¿™äº›å…ƒç´ åœ¨è§†é¢‘å¤„ç†ä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç”¨äºè§†é¢‘ç¼–è¾‘ã€æ ¼å¼è½¬æ¢æˆ–æµåª’ä½“ä¼ è¾“ç­‰å¤šç§åœºæ™¯ã€‚","title":"About Gstreamer Misc(deinterlace Videorate Videocrop)"},{"content":"å…³äº Gstreamer ä¸­çš„è§†é¢‘å¤„ç†ä¸ç¡¬ä»¶åŠ é€Ÿ \u0026ndash;èŠ‚é€‰è‡ªã€ŠLiveVideoStackCon2022 ä¸Šæµ·ç«™å¤§ä¼šï¼Œ è‹±ç‰¹å°”åŠ é€Ÿè®¡ç®—ç³»ç»Ÿä¸å›¾å½¢éƒ¨å·¥ç¨‹å¸ˆä½•ä¿Šå½¦ï¼ŒGstreamer çš„æ¡†æ¶å’Œç‰¹ç‚¹ï¼Œè§†é¢‘çš„æ¨¡å—åŒ–å¤„ç†ï¼Œä»¥åŠå…¶ç¡¬ä»¶åŠ é€Ÿçš„å®ç°ä¸åº”ç”¨æ¡ˆä¾‹ã€‹\nBasic Idea è¿™æ˜¯ Gstreamer ä¸­ä¸€ä¸ª element çš„åŸºæœ¬å½¢å¼ã€‚ä¸¤ç«¯çš„ pad æ¥è´Ÿè´£è¾“å…¥å’Œè¾“å‡ºï¼Œè€Œç”±å½“ä¸­çš„ element æ¥å®Œæˆå…·ä½“å·¥ä½œã€‚æ¯”å¦‚ä¸€ä¸ª decoderï¼Œè¾“å…¥æ˜¯ H264 çš„ç æµï¼Œè¾“å‡ºåˆ™æ˜¯ decoded æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è§†é¢‘å¸§ï¼Œæ‰€ä»¥æ­¤å¤„çš„ element å°±å¯ä»¥å®ç°ä¸ºä¸€ä¸ªå®Œæ•´çš„ H264 çš„è§£ç å™¨ã€‚è¯¥è§£ç å™¨çš„å®ç°å¯ä»¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„å†…éƒ¨å®ç°ï¼Œä¹Ÿå¯ä»¥å°è£…å·²æœ‰çš„å¤–éƒ¨è§£ç å™¨æ¥å®ç°ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ OpenH264 é¡¹ç›® build æˆ library çš„å½¢å¼å¹¶é€‚å½“å°è£…ï¼Œåœ¨æ­¤ element ä¸­ç›´æ¥è°ƒç”¨ï¼Œä»è€Œå®ç°è¯¥ H264 è§£ç å™¨æ’ä»¶çš„åŠŸèƒ½ã€‚\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™é‡Œçš„è¾“å…¥è¾“å‡ºæ ¼å¼æ˜¯éå¸¸éšæ„çš„ï¼Œç”šè‡³è¾“å…¥å¯ä»¥æ˜¯ videoï¼Œè¾“å‡ºæ˜¯ audioï¼Œè¿™å°±ä½¿æ’ä»¶çš„è®¾è®¡æœ‰äº†æ›´å¤§æ›´çµæ´»çš„ç©ºé—´ã€‚æ¯”å¦‚æˆ‘ä»¬å½•å–äº†ä¸€ä¸ªè§†é¢‘ï¼Œè§†é¢‘é‡Œçš„æ¯ä¸€å¸§éƒ½æ˜¯æ‹çš„æŸæœ¬ä¹¦çš„ä¸€é¡µï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥è®¾è®¡è¿™æ ·ä¸€ä¸ª pipelineï¼Œå…¶ä¸­ä¸€ä¸ª element å°† video è½¬æ¢æˆ textï¼Œç„¶åè¿æ¥å¦ä¸€ä¸ª elementï¼Œå…¶æ¥å— text è¾“å…¥ï¼Œå¹¶ç”¨è¯­éŸ³å°†å…¶å…¨éƒ¨è¯»å‡ºå¹¶è¾“å‡º audioï¼Œä»è€Œå®Œæˆäº†å°†æ•´æœ¬ä¹¦è½¬æˆ audio çš„åŠŸèƒ½ã€‚è¿™äº› element çš„è®¾è®¡æ–¹å¼åœ¨ Gstreamer æ˜¯è¢«å®Œå…¨å…è®¸çš„ã€‚å½“ç„¶ï¼ŒFFmpeg ä¹Ÿèƒ½å®Œæˆä¸Šè¿°åŠŸèƒ½ï¼Œä½†åœ¨æäº¤ä»£ç åˆ°ç¤¾åŒºå’Œ upstream è¿‡ç¨‹ä¸­ä¼šæœ‰é‡åˆ°å¾ˆå¤§çš„éº»çƒ¦å’ŒæŒ‘æˆ˜ï¼Œå› ä¸ºè¿™ç§ video è½¬ text æˆ–è€… text è½¬ audio çš„æ¨¡å¼ï¼Œåœ¨ FFmpeg ä¸­å¹¶æ²¡æœ‰ç°æˆçš„å½’ç±»ï¼Œä¹Ÿè®¸éœ€è¦ä½ æå‡ºæ–°çš„ filter ç±»å‹æˆ–æ–°çš„æ¨¡å¼ã€‚ è¿™æ˜¯æ›´å¤š element çš„ç±»å‹ï¼Œdemuxer å¯¹åº” FFmpeg é‡Œçš„ av input formatï¼Œsource element å¯¹åº”äº FFmpeg é‡Œçš„ URLï¼Œç”¨æ¥äº§ç”Ÿæºè¾“å…¥ï¼Œfilter element åˆ™å¯¹åº”äº FFmpeg é‡Œçš„ filterã€‚æ€»çš„æ¥è¯´ï¼Œè¿™äº›å†…å®¹æœ‰ä¸ FFmpeg ç›¸ä¼¼çš„åœ°æ–¹ï¼Œä½†æ˜¯ä¼šä»¥ element çš„å½¢å¼è¿›è¡Œç®¡ç†ï¼Œæœ€åç”¨ pipeline å°†è¿™äº›å†…å®¹è¿æ¥åœ¨ä¸€èµ·ï¼Œç”±ç¬¬ä¸€ä¸ªå‘æœ€åä¸€ä¸ªæ¨é€æ•°æ®ã€‚ åœ¨ç”µå­æŠ€æœ¯ï¼ˆç‰¹åˆ«æ˜¯æ•°å­—ç”µè·¯ï¼‰ä¸­ï¼Œæ•°æ®é€‰æ‹©å™¨ï¼ˆè‹±è¯­ï¼šData Selectorï¼‰ï¼Œæˆ–ç§°å¤šè·¯å¤ç”¨å™¨ï¼ˆè‹±è¯­ï¼šmultiplexerï¼Œç®€ç§°ï¼šMUXï¼‰æ˜¯ä¸€ç§å¯ä»¥ä»å¤šä¸ªæ¨¡æ‹Ÿæˆ–æ•°å­—è¾“å…¥ä¿¡å·ä¸­é€‰æ‹©ä¸€ä¸ªä¿¡å·è¿›è¡Œè¾“å‡ºçš„å™¨ä»¶\u0026gt; 1ã€‚ä¸€ä¸ªæœ‰ 2^n è¾“å…¥ç«¯çš„æ•°æ®é€‰æ‹©å™¨æœ‰ n ä¸ªå¯é€‰æ‹©çš„è¾“å…¥-è¾“å‡ºçº¿è·¯ï¼Œå¯ä»¥é€šè¿‡æ§åˆ¶ç«¯æ¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ªä¿¡å·ä½œä¸ºè¾“å‡º 1ã€‚æ•°æ®é€‰æ‹©å™¨ä¸»è¦ç”¨äºå¢åŠ ä¸€å®šé‡çš„æ—¶é—´å’Œå¸¦å®½å†…çš„å¯ä»¥é€šè¿‡ç½‘ç»œå‘é€çš„æ•°æ®é‡ 1ã€‚å®ƒä½¿\u0026gt; å¤šä¸ªä¿¡å·å…±äº«ä¸€ä¸ªè®¾å¤‡æˆ–èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªæ¨¡æ‹Ÿæ•°å­—è½¬æ¢å™¨æˆ–ä¸€ä¸ªä¼ è¾“çº¿ï¼Œè€Œä¸å¿…ç»™æ¯ä¸€ä¸ªè¾“å…¥ä¿¡å·é…å¤‡ä¸€ä¸ªè®¾å¤‡ã€‚\næ•°æ®é€‰æ‹©å™¨çš„æŠ½è±¡æ¨¡å‹å¦‚ä¸‹ï¼šé¦–å…ˆï¼Œå„ä¸ªä½é€Ÿä¿¡é“çš„ä¿¡å·é€šè¿‡**å¤šè·¯å¤ç”¨å™¨ï¼ˆMUXï¼Œå¤šå·¥å™¨ï¼‰ç»„åˆæˆä¸€è·¯å¯ä»¥åœ¨é«˜é€Ÿä¿¡é“ä¼ è¾“çš„ä¿¡å·ã€‚åœ¨è¿™ä¸ªä¿¡å·é€šè¿‡é«˜é€Ÿä¿¡é“åˆ°è¾¾æ¥æ”¶ç«¯ä¹‹åï¼Œå†ç”±åˆ†è·¯å™¨ï¼ˆDEMUXï¼Œè§£\u0026gt; å¤šå·¥å™¨ï¼‰**å°†é«˜é€Ÿä¿¡é“ä¼ è¾“çš„ä¿¡å·è½¬æ¢æˆå¤šä¸ªä½é€Ÿä¿¡é“çš„ä¿¡å·ï¼Œå¹¶ä¸”è½¬å‘ç»™å¯¹åº”çš„ä½é€Ÿä¿¡é“ 1ã€‚åœ¨å®é™…çš„é€šä¿¡å·¥ç¨‹åº”ç”¨é‡Œï¼Œå¤šè·¯å¤ç”¨å™¨å’Œåˆ†è·¯å™¨é€šå¸¸ä½œä¸ºä¸€ä¸ªè®¾å¤‡è¢«ä¸€èµ·ç”Ÿäº§å’Œå®‰è£…ã€‚ä½œä¸ºå‘é€æ•°æ®çš„æ—¶\u0026gt; å€™ï¼Œè¿™ä¸ªè®¾å¤‡å°±ä½œä¸ºå¤šè·¯å¤ç”¨å™¨ï¼Œåœ¨æ¥æ”¶æ•°æ®çš„æ—¶å€™ï¼Œè¿™ä¸ªè®¾å¤‡å°±ä½œä¸ºåˆ†è·¯å™¨ 1ã€‚\næ•°æ®é€‰æ‹©å™¨æ ¹æ®ä½¿ç”¨çš„æŠ€æœ¯å¯ä»¥åˆ†ä¸ºï¼š\næ—¶åˆ†å¤ç”¨ï¼ˆTDMï¼‰ï¼šé«˜é€Ÿä¿¡é“æ ¹æ®æ—¶é—´åˆ’åˆ†æˆå¤šä¸ªæ—¶éš™ä¾›å¤šä¸ªä½é€Ÿä¿¡é“è½®æµä½¿ç”¨ï¼Œæ¯ä¸ªæ—¶éš™å†…åªèƒ½æœ‰ä¸€ä¸ªä½é€Ÿä¿¡é“å æœ‰é«˜é€Ÿä¿¡é“çš„èµ„æºã€‚ é¢‘åˆ†å¤ç”¨ï¼ˆFDMï¼‰ï¼šå¤šè·¯å¤ç”¨å™¨å°†å„ä¸ªä½é€Ÿä¿¡é“çš„ä¿¡å·é€šè¿‡è°ƒåˆ¶åˆ†å¸ƒåˆ°é«˜é€Ÿä¿¡é“çš„ä¸åŒé¢‘æ®µï¼Œç„¶åè¿›è¡Œå åŠ ï¼Œå½¢æˆé«˜é€Ÿä¿¡é“ä¸Šä¼ è¾“çš„ä¿¡å·ã€‚åœ¨æ¥æ”¶ç«¯ï¼Œåˆ†è·¯å™¨ä¸€èˆ¬é€šè¿‡å¸¦é€šæ»¤æ³¢å™¨åˆ†ç¦»å„ä¸ªé¢‘æ®µï¼Œç„¶åè½¬å‘\u0026gt; ç»™å¯¹åº”çš„ä½é€Ÿä¿¡é“ã€‚ ç©ºåˆ†å¤ç”¨ï¼šä½¿ç”¨å¤šå¤©çº¿æŠ€æœ¯ï¼Œé€šè¿‡æ³¢æŸæˆå½¢æŠ€æœ¯å°†ä¿¡å·å¯¹å‡†ç‰¹å®šçš„å‘å°„æºæˆ–æ¥æ”¶ç«™è¿›è¡Œæ¥æ”¶æˆ–å‘é€ã€‚é€šè¿‡ç©ºåˆ†å¤ç”¨ï¼Œå¤šä¸ªå‘å°„æºæˆ–æ¥æ”¶ç«™å¯ä»¥åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªé¢‘ç‡ã€‚ ç åˆ†å¤ç”¨ï¼ˆCDMï¼‰ï¼šé‡‡ç”¨æ‰©é¢‘é€šä¿¡æŠ€æœ¯ï¼Œå„ä¸ªä½é€Ÿä¿¡é“å¯ä»¥åœ¨åŒä¸€ä¸ªåœ°æ–¹åŒæ—¶ä½¿ç”¨ç›¸åŒçš„é¢‘ç‡è¿›è¡Œé€šä¿¡ï¼Œä¸åŒçš„ä½é€Ÿä¿¡é“é€šè¿‡é‡‡ç”¨ä¸åŒçš„åœ°å€ç å¤ç”¨æ•´ä¸ªé¢‘æ®µ 1. è¿™æ˜¯ä¸€ä¸ªç®€å• pipeline çš„ä¾‹å­ï¼Œæ‰€æœ‰çš„ element éƒ½ä¼šæ”¾åœ¨ pipeline é‡Œé¢ï¼Œç„¶åç”± source å‘èµ·æ•°æ®å¹¶å‘ demuxerï¼ˆç›¸å½“äº FFmpeg é‡Œçš„ av input formatï¼‰æ¨é€ï¼Œdemuxer å¯¹æ•°æ®è¿›è¡Œè§£äº¤ç»‡ï¼Œç„¶åä¸€è·¯ä¼ é€ audioï¼Œä¸€è·¯ä¼ é€ videoï¼Œåœ¨å„è‡ªç»è¿‡ decoder è§£ç åï¼Œæœ€ååˆ†åˆ«é€šè¿‡ audio-sink æ¥æ’­æ”¾å‡º audioï¼Œé€šè¿‡ video-sink æ¥æ’­æ”¾å‡º videoã€‚ä¸Šè¿°å†…å®¹å°±æ˜¯ä¸€ä¸ªæœ€ç»å…¸ã€æœ€ç®€å•çš„ Gstreamer çš„ pipelineï¼Œpipeline ç›¸å½“äºä¸€ä¸ªå¤§çš„å®¹å™¨ï¼Œé‡Œé¢æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ elementï¼Œä¹Ÿå°±æ˜¯ pluginï¼ˆæ’ä»¶ï¼‰ã€‚ element ä¹‹é—´æ˜¯æœ‰äº¤äº’çš„ï¼Œä¸Šä¸‹æ¸¸ element ä¹‹é—´å¯ä»¥é€šè¿‡ Eventï¼ˆäº‹ä»¶ï¼‰æ¥åŒæ­¥çŠ¶æ€ï¼Œ è€Œé€šè¿‡ queryï¼ˆè¯¢é—®ï¼‰æ¥åŒæ­¥ä¿¡æ¯ã€‚\nä¸¾ä¸ª Event çš„ä¾‹å­ï¼Œæœ‰ä¸€ç§ Event å«åš EOSï¼ˆEnd Of Streamï¼‰ï¼Œç°åœ¨æ¯”å¦‚å½“å‰ pipeline æ­£åœ¨å½•åˆ¶ä¸€ä¸ª H264 çš„è§†é¢‘ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ª elementï¼Œä¸Šæ¸¸æ˜¯ cameraï¼Œä¸‹æ¸¸æ˜¯ H264 çš„ encoderã€‚ç”±äº encoder åœ¨ç¼–ç è¿‡ç¨‹ä¸­è¦äº§ç”Ÿ reorderï¼Œæ‰€ä»¥ camera é‡‡é›†çš„å¸§ä¼šè¢« cache åœ¨ encoder çš„ stack é‡Œï¼Œè€Œä¸ä¼šé©¬ä¸Šäº§ç”Ÿç¼–ç è¾“å‡ºï¼Œç›´åˆ°ä¸€ç»„ GOPï¼ˆGroup of Picturesï¼‰å®Œæˆï¼Œ encoder æ‰ä¼šç»Ÿä¸€ä¸ºè¿™ä¸€ç»„ GOP è¿›è¡Œç¼–ç å¹¶äº§ç”Ÿè¾“å‡ºã€‚æ‰€ä»¥å½“ camera é‡‡é›†å®Œæˆæœ€åä¸€å¸§æ—¶ï¼Œå°±éœ€è¦å‘é€ä¸€ä¸ª EOS Event åˆ°ä¸‹æ¸¸ï¼Œè¡¨ç¤ºæµå·²å®Œæˆï¼Œä¸ä¼šå†æœ‰åç»­å¸§äº§ç”Ÿã€‚è€Œ encoder æ”¶åˆ°æ­¤ Event åï¼Œå³ä½¿æœ€åä¸€ä¸ª GOP æ²¡æœ‰å®Œæˆï¼Œä¹Ÿä¼šå°†æ‰€æœ‰å·²ç» cache çš„å¸§è¿›è¡Œç¼–ç ï¼Œäº§ç”Ÿæœ€åçš„ç¼–ç è¾“å‡ºï¼Œç¡®ä¿ä¸è‡³äºæ¼æ‰æœ€åå‡ å¸§ã€‚\nå†ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ Queryï¼Œè‹¥æˆ‘ä»¬æœ‰ä¸€ä¸ª displayï¼Œå¯ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤º videoï¼ˆå‡è®¾åªæ”¯æŒ RGB æ ¼å¼ï¼‰ï¼Œè€Œ decoder çš„è¾“å‡ºå¤§å¤šæ˜¯ NV12 æˆ–è€… I420 æ ¼å¼çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦åœ¨ decoder è·Ÿ display ä¹‹é—´æ¥ä¸€ä¸ª videoproc(video post processing è§†é¢‘åå¤„ç†)çš„ element æ¥è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦æŒ‡å®š videoproc çš„è¾“å…¥è¾“å‡ºæ ¼å¼ï¼Œå®ƒä¼šè‡ªåŠ¨çš„é€šè¿‡ query çš„æ–¹å¼è¯¢é—®ä¸Šä¸‹æ¸¸æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œä»è€Œåˆ¤æ–­å‡ºå…¶è¦åšä¸€ä¸ª NV12â†’RGB çš„æ ¼å¼è½¬æ¢ã€‚è¿™ç§æ–¹å¼ä¹Ÿå°±æ˜¯ Gstreamer é‡Œé¢çš„çš„è‡ªåŠ¨åå•†ã€‚ Gstreamer ä¸­çš„ element ä¹‹é—´å‚æ•°è‡ªåŠ¨åå•†çš„ç»“æœæœ€åä¼šè¡¨ç¤ºæˆä¸€ä¸ª capsï¼Œä¸­æ–‡ç§°ä¸ºèƒ½åŠ›ï¼Œå…¶å†…å®¹å¯èƒ½åŒ…å«åˆ†è¾¨ç‡ï¼Œæ•°æ®æ ¼å¼ï¼Œå¸§ç‡ç­‰ç­‰ã€‚æ¯”å¦‚ä¸€ä¸ªéŸ³é¢‘æ’­æ”¾å™¨æ—¢æ”¯æŒåŸå§‹ audio æ ¼å¼åˆæ”¯æŒ mp3 å‹ç¼©æ ¼å¼çš„æ’­æ”¾ï¼Œæ‰€ä»¥åœ¨å®ƒçš„ caps ä¸­å°±æœ‰ raw å’Œ mp3 ä¸¤ä¸ªé€‰é¡¹ï¼Œè¡¨æ˜å®ƒå¯æ¥æ”¶è¿™ä¸¤ç§æ ¼å¼çš„è¾“å…¥ã€‚è€Œ decoder çš„è¾“å‡ºæ ¼å¼æ˜¯å›ºå®šçš„ï¼Œå®ƒç”±ç æµé‡Œçš„å†…å®¹æ‰€å†³å®šã€‚æ‰€ä»¥åœ¨è¿æ¥è¿™ä¸¤ä¸ª element æ—¶ï¼Œè¦æ‰¾åˆ°ä¸¤è€…çš„äº¤é›†ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯æœ€ç»ˆæ‰€è¦ä¼ è¾“æ•°æ®çš„ capsï¼ˆå³å›¾ä¸­çº¢è‰²æ–¹æ¡†çš„éƒ¨åˆ†ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸¤è€…åå•†ä¸€è‡´çš„å‚æ•°æˆ–å‚æ•°é›†ã€‚å¦‚å›¾ä¸­ï¼Œåå•†ç»“æœä¸º mp3 æ ¼å¼ã€åŒé€šé“ã€ç ç‡ä¸º 16000 çš„ audioã€‚è‡ªæ­¤ä»¥åï¼Œdecoder éœ€è¦å‘ä¸‹æ¸¸ä¼ è¾“çº¢è‰²æ–¹æ¡†é‡Œè§„å®šæ ¼å¼çš„ audioï¼Œä¸èƒ½è‡ªè¡Œæ”¹å˜ã€‚è¿™ç§èƒ½åŠ›çš„è‡ªåŠ¨åå•†ï¼ŒåŸºæœ¬ä¸éœ€è¦ç”¨æˆ·çš„æŒ‡å®šï¼Œè€Œæ˜¯ç”±ä¸¤ä¸ª element ä¹‹é—´è‡ªåŠ¨åå•†å®Œæˆã€‚ å…³äº source code çš„åˆ†å¸ƒç»“æ„ï¼ŒGstreamer ä¹Ÿé‡‡ç”¨äº†æ¯”è¾ƒåˆ†æ•£çš„æ–¹å¼ï¼Œä»¥æ–¹ä¾¿æ’ä»¶çš„å¼€å‘ã€‚ä¸ FFmpeg æŠŠæ‰€æœ‰çš„å†…å®¹æ”¾åœ¨åŒä¸€ä¸ª repo é‡Œä¸åŒï¼ŒGstreamer å°†å…¶å„ä¸ªæ¨¡å—æ ¹æ®åŠŸèƒ½åˆ†ä¸ºäº†å¤šä¸ª repo åˆ†åˆ«å­˜æ”¾ã€‚å…¶æ¡†æ¶å’ŒåŸºæœ¬åº“åˆ†åˆ«è¢«æ–¹åœ¨ gstreamer å’Œ gst-plugins-base è¿™ä¸¤ä¸ª repo ä¸­ï¼Œå…¶ä»–çš„ repo å­˜æ”¾å„ç§æ’ä»¶ï¼Œå¹¶åªä¾èµ–äºè¿™ä¸¤ä¸ª repoï¼Œäº’ç›¸ä¹‹é—´æ²¡æœ‰ä¾èµ–ã€‚å…¶ä¸­ gst-plugins-good ä¸»è¦åŒ…å«æ¯”è¾ƒæˆç†Ÿçš„æ’ä»¶ï¼Œgst-plugins-bad åˆ™ä¸»è¦åŒ…å«æ­£åœ¨å¼€å‘çš„æ’ä»¶ï¼Œgst-plugins-ugly ä¸æ˜¯æŒ‡ code è´¨é‡å·®ï¼Œè€Œæ˜¯ä¸»è¦æ”¾ç½®äº†ä¸€äº›æœ‰ license é—®é¢˜çš„æ’ä»¶ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®åœ°åŸŸå’Œæ³•è§„ï¼Œè¿›è¡Œé€‰æ‹©æ€§çš„è§„é¿æˆ–å®‰è£…ã€‚\nç»å¸¸ä¼šæœ‰äººæåˆ° FFmpeg ä¸èƒ½å’Œ upstream çš„ code è¿›è¡ŒåŒæ­¥çš„é—®é¢˜ã€‚è¿™æ˜¯å› ä¸ºåšå…·ä½“å·¥ç¨‹æ—¶ï¼Œæˆ‘ä»¬çš„å¼€å‘æ¨¡å¼å¤šæ˜¯åŸºäºä¸€ä¸ªå›ºå®šçš„ FFmpeg ç‰ˆæœ¬åšä¿®æ”¹ï¼Œè€Œå‘ç¤¾åŒºå›é¦ˆè¿™äº›ä¿®æ”¹å¹¶è¢« merge çš„éš¾åº¦åˆéå¸¸å¤§ï¼Œ æ‰€ä»¥å°±åªèƒ½ç»´æŠ¤ä¸€ä¸ªç§æœ‰çš„ FFmpeg repo å¹¶ä¸åœè¿­ä»£ã€‚è€Œä¸æ­¤åŒæ—¶ï¼Œupstream çš„å¼€å‘è€…ä¹Ÿæ²¡é—²ç€ï¼Œä¸æ–­çš„ç»™å®˜æ–¹çš„ FFmpeg æ·»åŠ å„ç§æ–°çš„ feature å’Œ bug fixingã€‚åŒæ–¹ä»æ­¤åˆ†å‰ï¼Œ ä¹…è€Œä¹…ä¹‹ï¼Œç­‰ä½ å†æƒ³ rebase å›åˆ°å®˜æ–¹çš„ FFmpegï¼Œä½“éªŒå…¶æ–°åŠŸèƒ½æ—¶ï¼Œå‘ç°å·²ç»æ˜¯ä¸å¯èƒ½ã€‚ç›¸åï¼ŒGstreamer å°±å¯ä»¥æœ‰æ•ˆçš„è§„é¿è¿™ä¸€ç‚¹ã€‚åœ¨å¼€å‘ä¸€ä¸ªæ–°çš„æ’ä»¶æ—¶ï¼Œå¼€å‘è€…ä¸éœ€è¦åœ¨å·²æœ‰çš„ repo é‡Œè¿›è¡Œ commitï¼Œè€Œå®Œå…¨å¯ä»¥æ–°å»ºä¸€ä¸ª repoï¼ˆç”šè‡³ä¸éœ€è¦å¼€æºï¼‰å¹¶ç”±è‡ªå·±æ¥ç»´æŠ¤ï¼Œåªè¦è¿™ä¸ªæ–°å»ºçš„ repo ä¾èµ–äºåˆšæ‰æåˆ°çš„ä¸¤ä¸ªåŸºæœ¬åº“å³å¯ã€‚è€Œè¿™ä¸¤ä¸ªåŸºæœ¬åº“çš„å‡çº§æ˜¯éå¸¸å¹³ç¨³çš„ï¼Œå…¼å®¹æ€§ä¹Ÿå¾ˆå¥½ï¼Œå› æ­¤å¯ä»¥éšæ—¶è¿›è¡Œå‡çº§ï¼Œä¸æœ€æ–°çš„ upstream ä¿æŒåŒæ­¥ã€‚è€Œç”±äºæ‰€æœ‰çš„ repo éƒ½åªä¾èµ–äºåŸºæœ¬åº“ï¼Œæ‰€ä»¥å„ä¸ª repo ä¹‹é—´çš„æ’ä»¶å¯ä»¥æ— é˜»ç¢çš„è¿›è¡ŒååŒå·¥ä½œï¼Œè¿™å°±è§£å†³äº†ç”¨å›ºå®šåº“åšç§æœ‰åº“çš„é—®é¢˜ã€‚\n02 The video Processing And Hardware Acceleration æ¥ç€ï¼Œæˆ‘ä»¬ä»‹ç»åœ¨ Gstreamer é‡Œå¦‚ä½•å¤„ç† videoã€‚å›¾ä¸­å±•ç¤ºçš„æ˜¯å„ç§ video ç›¸å…³çš„æ’ä»¶ï¼Œä¸»è¦åˆ†ä¸ºå…«å¤§ç±»ã€‚\né¦–å…ˆæ˜¯ demuxï¼Œç”¨äºè§£äº¤ç»‡ï¼Œåˆ†å¼€ä¸€ä¸ªæ–‡ä»¶ä¸­çš„å„è·¯ audio å’Œ videoï¼Œå®ƒåŒ…æ‹¬ qtdemuxï¼Œmatroskademux ç­‰ï¼›mux ä¸ demux åŠŸèƒ½ç›¸åï¼Œç”¨äºåŠ äº¤ç»‡ï¼Œæ¯”å¦‚ matroskamux èƒ½å°† H264 çš„ video ç æµå’Œ AC3 çš„ audio ç æµæ ¹æ®æ—¶é—´æˆ³äº¤ç»‡åœ¨ä¸€èµ·ï¼Œå½¢æˆ MKV æ–‡ä»¶ã€‚\nparse ç›¸å½“ä¸ç æµè¿‡æ»¤å™¨ï¼Œæ¯”å¦‚å¯ä»¥ç”¨å®ƒæ¥æ‰¾ç æµä¸­å¸§çš„è¾¹ç•Œï¼ˆå¯¹äº decoder å¾ˆé‡è¦ï¼Œdecoder å¤šéœ€è¦ä¸€ä¸ªå®Œæ•´çš„å¸§æ•°æ®æ¥è§£ç ï¼Œè€Œä¸æ˜¯ä¸€å¸§ä¸­çš„éƒ¨åˆ† sliceï¼‰ã€‚å¦å¤–ï¼Œå®ƒä¹Ÿå¯ä»¥åšä¸€äº›ç æµè¯­æ³•å±‚æ ¼å¼çš„è½¬æ¢ï¼Œæ¯”å¦‚ä» DVD ä¸­çš„ H264 å¸§æ²¡æœ‰å‰å¯¼ç ï¼Œä½†ç©ºé—´æˆ– cable é‡Œä¼ è¾“çš„ H264 éœ€è¦å‰å¯¼ç è¿›è¡ŒåŒæ­¥ï¼Œæ‰€ä»¥è‹¥æƒ³å°†å½“å‰ç©ºé—´ä¼ è¾“é‡Œçš„ç æµå½•å…¥ DVD é‡Œæˆ–è½¬æˆ RTXP æ ¼å¼æ—¶ï¼Œå°±éœ€è¦ç”¨ parse å°†å…¶å‰å¯¼ç å»æ‰ã€‚\ndecoder å’Œ encoder å³ç¼–è§£ç å™¨ï¼Œä¸éœ€è§£é‡Šã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGstreamer é™¤äº†æœ‰å†…å»ºçš„ encoder å’Œ decoderï¼ˆå³å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ SW æˆ– HW decoder æˆ– encoderï¼‰ï¼Œå…¶è¿˜ç»å¸¸é€šè¿‡åŒ…è£…å’Œ wrap ä¸€äº›ç°æœ‰æˆç†Ÿçš„ codec project çš„æ–¹å¼æ¥å®ç°ã€‚æ¯”å¦‚ FFmpeg å°±è¢«åŒ…è£…æˆäº†ä¸€ä¸ªæ’ä»¶ï¼Œ å›¾ä¸­å±•ç¤ºçš„ avdec_h265 å°±æ˜¯é€šè¿‡ wrap çš„æ–¹å¼æ¥ä½¿ç”¨ FFmpeg ä¸­çš„ H265 decoderï¼Œè€Œ openh264dec åˆ™æ˜¯é€šè¿‡åŒ…è£… openh264 å·¥ç¨‹å¾—åˆ°ã€‚ä¸€äº›è‘—åçš„ encoder å·¥ç¨‹ï¼Œæ¯”å¦‚ x264 å’Œ x265 ä¹Ÿè¢«åˆ†åˆ«åŒ…è£…æˆäº† x264encï¼Œx265enc æ’ä»¶ã€‚\nå½“æ¶‰åŠåˆ°è§†é¢‘å¤„ç†æ—¶ï¼Œ**ç¡¬ä»¶è§£ç å™¨ï¼ˆHW decoderï¼‰å’Œè½¯ä»¶è§£ç å™¨ï¼ˆSW decoderï¼‰**æ˜¯ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µã€‚è®©æˆ‘ä¸ºä½ è¯¦ç»†è§£é‡Šä¸€ä¸‹ï¼š\nç¡¬ä»¶è§£ç å™¨ï¼ˆHW decoderï¼‰ï¼š\nå®šä¹‰ï¼šç¡¬ä»¶è§£ç å™¨æ˜¯ä¸€ç§ä¸“é—¨ç”¨äºå¤„ç†è§†é¢‘æ–‡ä»¶çš„ç¡¬ä»¶ç»„ä»¶ã€‚å®ƒè´Ÿè´£å°†è§†é¢‘è§£ç ï¼Œä»¥ä¾¿åœ¨è®¾å¤‡ä¸Šè¿›è¡Œæ’­æ”¾ã€‚ å·¥ä½œåŸç†ï¼šç¡¬ä»¶è§£ç å™¨é€šå¸¸ç”±å¤šåª’ä½“èŠ¯ç‰‡ç»„æˆï¼Œä¸“é—¨ç”¨äºå¤„ç†è§†é¢‘è§£ç ä»»åŠ¡ã€‚å®ƒå¯ä»¥å°†è§†é¢‘æ–‡ä»¶è§£ç ä¸ºå¯ä¾›è®¾å¤‡æ’­æ”¾çš„æ ¼å¼ã€‚ ä¼˜ç‚¹ï¼šç¡¬ä»¶è§£ç å™¨é€šå¸¸æ¯” CPU æ›´æ“…é•¿å¤„ç†è§†é¢‘ï¼Œå› æ­¤å¯ä»¥å®ç°æ›´æµç•…çš„è§†é¢‘æ’­æ”¾ã€‚ æ³¨æ„ï¼šç¡¬ä»¶è§£ç å™¨çš„è¾“å‡ºä¸è½¯ä»¶è§£ç å™¨ç›¸åŒï¼Œä½†é€šå¸¸æ›´èŠ‚çœç”µåŠ›å’Œ CPU èµ„æºã€‚\nè½¯ä»¶è§£ç å™¨ï¼ˆSW decoderï¼‰ï¼š\nå®šä¹‰ï¼šè½¯ä»¶è§£ç å™¨ä¹Ÿç”¨äºè§†é¢‘è§£ç ï¼Œä½†å®ƒçš„å·¥ä½œæ–¹å¼ç•¥æœ‰ä¸åŒã€‚å®ƒä¾èµ–äºè®¾å¤‡çš„å¤„ç†å™¨æ¥æ‰§è¡Œè§£ç ä»»åŠ¡ã€‚ å·¥ä½œåŸç†ï¼šè½¯ä»¶è§£ç å™¨ä½¿ç”¨ CPU æ¥å¤„ç†è§†é¢‘è§£ç ï¼Œå› æ­¤è¢«ç§°ä¸ºâ€œè½¯ä»¶è§†é¢‘è§£ç â€ã€‚ æ€§èƒ½ï¼šå°½ç®¡è½¯ä»¶è§£ç å™¨çš„æ€§èƒ½é€æ¸æé«˜ï¼Œä½†å®ƒä»éœ€è¦å¼ºå¤§çš„å¤„ç†å™¨æ‰èƒ½ä¸ç¡¬ä»¶è§£ç å™¨çš„æ’­æ”¾è´¨é‡ç›¸åª²ç¾ã€‚\nç¼–ç å™¨ï¼ˆencoderï¼‰ï¼š\nç¼–ç å™¨æ˜¯ç”¨äºå°†åŸå§‹è§†é¢‘æ•°æ®ç¼–ç ä¸ºå‹ç¼©æ ¼å¼ï¼ˆå¦‚ H.264 æˆ– H.265ï¼‰çš„ç»„ä»¶ã€‚ ç¡¬ä»¶ç¼–ç å™¨ï¼ˆHW encoderï¼‰ä½¿ç”¨è®¾å¤‡çš„ç¡¬ä»¶æ¥æ‰§è¡Œç¼–ç ä»»åŠ¡ï¼Œè€Œè½¯ä»¶ç¼–ç å™¨ï¼ˆSW encoderï¼‰åˆ™ä¾èµ–äº CPUã€‚ ç¡¬ä»¶ç¼–ç å™¨é€šå¸¸é€Ÿåº¦æ›´å¿«ï¼Œä½†è¾“å‡ºè´¨é‡è¾ƒä½ï¼Œè€Œè½¯ä»¶ç¼–ç å™¨åˆ™ç›¸åã€‚\næ€»ä¹‹ï¼Œç¡¬ä»¶è§£ç å™¨å’Œç¼–ç å™¨é€šå¸¸æ›´é«˜æ•ˆï¼Œä½†è½¯ä»¶è§£ç å™¨å’Œç¼–ç å™¨åœ¨æŸäº›æƒ…å†µä¸‹ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†æ—§æ ¼å¼æˆ–ç‰¹å®šéœ€æ±‚çš„è§†é¢‘æ—¶ã€‚12\npostproc ç›¸å½“äº FFmpeg é‡Œçš„ filterï¼Œä¸»è¦æ”¯æŒå„ç§ scale è½¬æ¢å’Œ color format è½¬æ¢ï¼Œä»¥åŠé«˜æ–¯æ»¤æ³¢ï¼Œé”åŒ–ç­‰æ“ä½œã€‚\nrender å³æ¸²æŸ“ï¼Œå¯ä»¥ç†è§£ä¸ºè§†é¢‘çš„è¾“å‡ºã€‚FFmpeg é‡Œçš„ render æ”¯æŒè¾ƒå°‘ï¼ˆæ®æˆ‘æ‰€çŸ¥åªæœ‰ SDLï¼‰ï¼ŒGstreamer å°±å¯¹è¿™éƒ¨åˆ†è¿›è¡Œäº†æ‰©å±•ï¼ŒåŒ…æ‹¬ glimagesinkï¼ˆä½¿ç”¨ OpenGL çš„ 3D æ¸²æŸ“ï¼‰ï¼Œximagesinkï¼ˆè¾“å‡ºåˆ° Xï¼‰ï¼Œwaylandsinkï¼ˆè¾“å‡ºåˆ° waylandï¼‰ç­‰ï¼Œæ€»ä½“æ¥è¯´æ”¯æŒçš„æ¯”è¾ƒå®Œæ•´ã€‚\nå…¶ä»–è¿˜å‰©ä¸‹ä¸€äº›æ‚é¡¹ï¼ŒåŒ…æ‰© deinterlaceï¼ˆåœºå¸§å¤„ç†ï¼‰ã€videorateï¼ˆå¸§ç‡è½¬æ¢ï¼‰å’Œ videocropï¼ˆè§†é¢‘æˆªå–ï¼‰ç­‰ã€‚ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„è½¯ä»¶è½¬ç çš„ pipeline å®ä¾‹ï¼Œå…¶é¦–å…ˆä½¿ç”¨ AV1 çš„ decoder å°† AV1 çš„ç æµè§£å‡ºï¼Œç„¶åä½¿ç”¨ x264enc å°†å…¶å‹ç¼©ï¼Œæœ€åä¿å­˜ä¸º H264 æ–‡ä»¶ã€‚è¯¥å›¾æ˜¯ç”¨ Gstreamer è‡ªå¸¦çš„å·¥å…·ç”Ÿæˆçš„ï¼Œå›¾ä¸­ç»˜åˆ¶äº† pipeline ä¸­çš„æ¯ä¸€ä¸ª elementï¼Œelement ä¹‹é—´çš„å…³ç³»ä»¥åŠ element ä¹‹é—´åå•†å’Œä¼ è¾“çš„æ•°æ®æ ¼å¼ï¼ˆå³å‰é¢æåˆ°çš„ capsï¼‰ã€‚ æ¥ç€ä»‹ç»åŸºäºç¡¬ä»¶åŠ é€Ÿçš„ Gstreamer çš„æ’ä»¶ã€‚é¦–å…ˆæ¥çœ‹ VAAPIï¼ŒVAAPI æ˜¯ç”± Intel æå‡ºçš„ä¸€å¥—ç¡¬ä»¶åŠ é€Ÿ APIã€‚MediaSDK åˆ™æ˜¯å¯¹ VAAPI çš„è¿›ä¸€æ­¥å°è£…ï¼Œä½¿ç”¨æˆ·æ›´æ–¹ä¾¿ä½¿ç”¨ï¼ˆMediaSDK ä¹Ÿç»å¸¸è¢«ç§°ä½œ QSVï¼‰ã€‚D3D11/12 ä¸»è¦ç”¨äºåœ¨ Windows ä¸Šæä¾›åŠ é€Ÿã€‚V4L2 ä¸»è¦åŸºäº ARM å¹³å°ï¼Œå…¶ç¡¬ä»¶åŠ é€Ÿçš„ driver é€šå¸¸ä¼šå®ç°åœ¨ kernel é‡Œã€‚Vulkan æ˜¯æœ€è¿‘æå‡ºçš„ï¼Œæ­¤å¤–è¿˜æœ‰ Cuda æœ€è¿‘ä¹Ÿè¡¥å……äº†å…³äºè§†é¢‘ç¡¬ä»¶åŠ é€Ÿçš„ APIã€‚ æ¥ç€ä»‹ç»ä¸€ä¸‹ç¡¬ä»¶åŠ é€Ÿçš„å…·ä½“å®ç°ã€‚ä»¥ decoder ä¸ºä¾‹ï¼Œä¸€ä¸ªå®Œæ•´çš„ decoderï¼Œå…¶å¤§è‡´å¯ä»¥åˆ†ä¸ºçŠ¶æ€ç»´æŠ¤ï¼ˆæˆ–è€…å«çŠ¶æ€æœºï¼‰å’Œè§£ç è¿ç®—ä¸¤éƒ¨åˆ†ã€‚çŠ¶æ€ç»´æŠ¤åŒ…æ‹¬æ¯”å¦‚ SPS å’Œ PPS ä¸­å‚æ•°çš„æ£€æµ‹å’Œè®¾å®šï¼Œå‚è€ƒå¸§çš„ç»´æŠ¤å’Œé‡æ’åˆ—ï¼Œä»¥åŠç¼ºå¸§ç­‰å¸¸è§é”™è¯¯çš„å¤„ç†ç­‰ï¼Œ è€Œè§£ç è¿ç®—åˆ™åŒ…æ‹¬æ¯”å¦‚ VLDã€MC ç­‰ã€‚å‰è€…é€»è¾‘æ€§å¼ºä½†è¿ç®—é‡å¾ˆå°‘ï¼Œè€Œåè€…é€»è¾‘æ€§å¾ˆå°‘å´è¦æ±‚å¤§é‡çš„è®¡ç®—ï¼Œæ‰€ä»¥ï¼Œå¤§å¤šç¡¬ä»¶åŠ é€Ÿçš„ API è®¾è®¡éƒ½ä¼šé’ˆå¯¹åè€…ï¼Œè€ŒæŠŠé€»è¾‘æ€§è¾ƒå¼ºçš„çŠ¶æ€ç»´æŠ¤éƒ¨åˆ†ç•™ç»™è½¯ä»¶æ¥å®ç°ã€‚åœ¨ Gstreamer ä¸­äº¦æ˜¯å¦‚æ­¤ï¼Œ å¹¶ç»“åˆäº†é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œ æŠŠæ‰€æœ‰ decoder éƒ½éœ€è¦çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚è¾“å…¥è¾“å‡ºç®¡ç†ï¼Œå¸§çš„ cache æœºåˆ¶ç­‰ï¼‰æ”¾åœ¨åŸºç±»ä¸­ï¼Œ æŠŠ H264 ç‰¹å®šçš„é€»è¾‘ï¼ˆæ¯”å¦‚ H264 çš„å‚è€ƒå¸§ç®¡ç†ï¼ŒInterlaced ç æµä¸­ä¸Šä¸‹åœºçš„ç®¡ç†ç­‰ï¼‰æŠ½è±¡åˆ° H264 decoder ä¸­ï¼Œè€Œå­ç±» GstVaH264Decã€GstD3D11H264Dec å’Œ GstNVH264Dec åˆ™è°ƒç”¨å…·ä½“çš„ HW åŠ é€Ÿ API æ¥è¿›è¡Œè§£ç è¿ç®—éƒ¨åˆ†çš„åŠ é€Ÿã€‚ è¿™äº›æ˜¯ Gstreamer é‡Œå·²æœ‰çš„ç¡¬ä»¶åŠ é€Ÿçš„æ’ä»¶ï¼Œå…¶å›Šæ‹¬äº†å‡ ä¹æ‰€æœ‰å¸‚é¢ä¸Šæµè¡Œçš„ codecï¼Œå¦‚ h264ã€h265ã€vp9ï¼Œav1 ç­‰ã€‚æ’ä»¶çš„åå­—ä¸€èˆ¬é‡‡ç”¨ åŠ é€Ÿåº“å+codec å+åŠŸèƒ½ æ¥å‘½åã€‚æ¯”å¦‚ vah264dec å°±æ˜¯åŸºäº VAAPI åŠ é€Ÿçš„ H264 decoderã€‚å½“ç„¶ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰åŸºäºç¡¬ä»¶çš„è§†é¢‘åå¤„ç†æ’ä»¶ vapostprocï¼Œvadeinterlaceï¼Œä»¥åŠå¤šè·¯è§†é¢‘å¤åˆæ’ä»¶ vacompositor ç­‰ã€‚ è¿™å¼ å›¾è¯´æ˜ Gstreamer åœ¨ç¼–è§£ç è¿‡ç¨‹ä¸­å¦‚ä½•ä½¿ç”¨ç¡¬ä»¶ã€‚é¦–å…ˆï¼Œdecoder ä¼šå°†ç æµä¸­éœ€è¦è§£ç çš„ data ä»ä¸»å­˜æ‹·è´åˆ° GPU çš„ memory ä¸­ï¼Œå¹¶é©±ä½¿ GPU è¿è¡Œè§£ç è¿ç®—ç”Ÿæˆè§£ç å›¾åƒï¼ˆå› æ­¤ï¼Œç”Ÿæˆçš„è§£ç å›¾åƒä¹Ÿè‡ªç„¶å°±åœ¨ GPU çš„ memory ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿç»å¸¸ä¹Ÿå« surfaceï¼‰ã€‚ä¹‹åçš„ VPPï¼ˆVideo Post Processingï¼‰æ’ä»¶ä¼šä»¥æ­¤ surface ä½œä¸ºæºï¼Œåœ¨ GPU ä¸Šè¿è¡Œ color conversion å’Œ scaling ç­‰ç®—æ³•ï¼Œç”Ÿæˆä¸€å—æ–°çš„ surface å¹¶é€ç»™ encoderã€‚æœ€åï¼Œencoder åŒæ ·ä¼šåœ¨ GPU ä¸Šè¿è¡Œç¼–ç ç®—æ³•ï¼Œä»è€Œäº§ç”Ÿæ–°çš„ç æµã€‚å›¾ä¸­çš„å„ä¸ªæ’ä»¶ä¹‹é—´åªä¼ è¾“ GPU çš„ surface handleï¼Œæ²¡æœ‰å†…å­˜æ‹·è´ï¼Œè¿™æ ·å°±å®ç°äº†æ•´æ¡ pipeline åœ¨ GPU ä¸Šçš„å…¨åŠ é€Ÿã€‚\n03 Use Gstreamer: Pipelines And Examples æˆ‘ä»¬ç°åœ¨æ¥ä¸¾ä¸€äº›å®é™…çš„ Gstreamer çš„ä¾‹å­ã€‚é¦–å…ˆæ˜¯ç”¨å‘½ä»¤è¡Œæ¥æ”¾ä¸€ä¸ªæ–‡ä»¶ï¼Œè§†é¢‘è¾“å‡ºä¸‹æ–¹å³æ˜¯è¯¥å®Œæ•´çš„å‘½ä»¤è¡Œï¼ˆä¸€ä¸ªå®Œæ•´çš„ gst-launch ä¹Ÿé€šå¸¸ä¼šè¢«ç§°ä¸ºä¸€ä¸ª pipelineï¼‰ã€‚è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ª MP4 æ ¼å¼æ–‡ä»¶ï¼Œqtdemux ä¼šè§£äº¤ç»‡è¯¥æ–‡ä»¶ï¼Œé€å‡ºä¸¤è·¯æ•°æ®ï¼Œä¸€è·¯ videoï¼ˆå›¾ä¸­è“è‰²éƒ¨åˆ†ï¼‰ï¼Œä¸€è·¯ audioï¼ˆå›¾ä¸­ç»¿è‰²éƒ¨åˆ†ï¼‰ã€‚ å†çœ‹ä¸€ä¸ªæ¯”è¾ƒæœ‰è¶£çš„ä¾‹å­ã€‚identityï¼ˆå›¾ä¸­é»„è‰²éƒ¨åˆ†ï¼‰æ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶æœ‰ä¸€ä¸ªå±æ€§æ˜¯å¯ä»¥è®©å…¶éšæ„ä¸¢æ‰ x%çš„æ•°æ®ã€‚æˆ‘ä»¬æ­£å¥½å¯ä»¥ç”¨è¿™ä¸ªæ’ä»¶æ¥æµ‹è¯• decoder çš„ç¨³å®šæ€§ã€é²æ£’æ€§ã€‚è¿™é‡Œå‡å®š x æ˜¯ 20ï¼Œä¹Ÿå°±æ˜¯ä¸¢å¤± 20%çš„å¸§ã€‚å¦‚å›¾ï¼Œå› ä¸ºéƒ¨åˆ†æ•°æ®æœ‰ä¸¢å¤±ï¼Œä¼šé€ æˆéƒ¨åˆ†è§£ç é”™è¯¯æˆ–è€… reference å¸§ä¸¢å¤±ï¼Œæ‰€ä»¥è§£å‡ºæœ‰ garbage çš„å›¾åƒæ˜¯åœ¨æ„æ–™ä¹‹ä¸­ï¼Œä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†ä¸èƒ½æ¥å—çš„æ˜¯è§£ç ç¨‹åº crashã€‚å›¾ä¸­æ˜¯ä¸¢æ‰ 20%çš„æ•°æ®çš„æ•ˆæœï¼Œè‹¥ä¸¢æ‰ 80%çš„æ•°æ®ï¼Œé‚£ä¼šé€ æˆåªæœ‰å°‘éƒ¨åˆ†å›¾ç‰‡æ®‹å½±è¢«æ˜¾ç¤ºï¼Œ ä½†åŒæ ·çš„ï¼Œä¸€ä¸ªç¨³å®šå¼ºå¤§çš„ decoder åœ¨æ­¤æƒ…å†µä¸‹ä¾ç„¶ä¸èƒ½ crashã€‚ è¿™æ˜¯ä¸€ä¸ªç§°ä¸º crop çš„ element/pluginï¼Œå®ƒå¯ä»¥ç”¨æ¥åšè§†é¢‘è£å‰ªï¼Œå›¾ä¸­å³è¾¹çš„å›¾åƒå°±æ˜¯å¯¹å·¦è¾¹çš„å›¾åƒè£å‰ªæ‰å…¶å·¦è¾¹çš„ 200 åƒç´ å’Œä¸‹è¾¹çš„ 81 åƒç´ è·å¾—çš„ã€‚è¿™ä¸ªåŠŸèƒ½æœ¬çœå¹¶ä¸ç¨€å¥‡ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGstreamer ä¸­ï¼Œè¯¥ videocrop æ’ä»¶ä¼šè‡ªåŠ¨è¿›è¡Œä¸€äº›æ€§èƒ½ä¼˜åŒ–ã€‚åœ¨ä¸Šé¢çš„å‘½ä»¤è¡Œä¸­ï¼Œvideocrop ä¸‹æ¸¸çš„ vapostproc æ’ä»¶ï¼Œåœ¨è¿›è¡Œ hue è½¬æ¢çš„æ—¶å€™ï¼Œæœ¬èº«å°±å¯ä»¥è®¾ç½® src image çš„æœ‰æ•ˆåŒºåŸŸï¼Œè€Œè¿™å°±ç›¸å½“äºè¿›è¡Œäº†ä¸€æ¬¡éšå«çš„ crop æ“ä½œã€‚æ‰€ä»¥ï¼Œåœ¨æ­¤å¤„ï¼Œvideocrop ä¸ä¼šè¿›è¡ŒçœŸæ­£çš„ crop æ“ä½œï¼Œè€Œæ˜¯åªæŠŠè¦ crop çš„èŒƒå›´ä½œä¸º meta data ä¼ é€ç»™ä¸‹æ¸¸å³å¯ã€‚è¿™ç§æ™ºèƒ½çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¹Ÿæ­£æ˜¯é€šè¿‡ query æœºåˆ¶ï¼Œè¯¢é—®ä¸‹æ¸¸çš„èƒ½åŠ›è€Œåšå‡ºçš„ã€‚ è¿™æ˜¯ä¹‹å‰æåˆ°çš„ compositer æ’ä»¶ï¼Œå®ƒçš„åŠŸèƒ½å°±æ˜¯èƒ½å°†å„è·¯ video äº¤ç»‡åˆ°ä¸€èµ·ã€‚å›¾ä¸­ä¸€å…±æœ‰äº”è·¯ video è¢«åˆå¹¶åˆ°äº†ä¸€èµ·ã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šæ¯ä¸€è·¯çš„ä½ç½®ã€alpha å€¼å’Œåˆ†è¾¨ç‡ï¼Œè®©å…¶å‡ºç°åœ¨æˆ‘ä»¬æƒ³è¦çš„ä½ç½®ã€‚å‘½ä»¤è¡Œä¸­ï¼Œç¬¬ä¸€è·¯æ²¡æœ‰æ˜¾å¼æŒ‡å®šå‚æ•°ï¼Œæ‰€ä»¥å…¶ä¼šæ•´å±æ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯è¯¥å›¾çš„åº•å›¾ï¼Œè€Œé»„è‰²å†…å®¹è¡¨ç¤ºç¬¬äºŒè·¯ï¼Œçº¢è‰²å†…å®¹è¡¨ç¤ºç¬¬ä¸‰è·¯ï¼Œç»¿è‰²å†…å®¹è¡¨ç¤ºç¬¬å››è·¯ï¼Œè“è‰²å†…å®¹è¡¨ç¤ºç¬¬äº”è·¯ï¼Œå…¶ä¸­ç¬¬äº”è·¯æ˜¯ video è§£ç è¾“å‡ºã€‚å„è·¯è¾“å‡ºçš„ä½ç½®å¦‚å›¾ä¸­æ‰€ç¤ºã€‚æ˜¾ç„¶ï¼Œcompositer å¾ˆé€‚ç”¨äºå®‰é˜²çš„ç›‘æ§åœºæ™¯ï¼Œå°†æ¯ä¸ªæ‘„åƒå¤´çš„å†…å®¹ç»„åˆæ‹¼æ¥åˆ°ä¸€èµ·ï¼Œå³å¤šè¾“å…¥å•è¾“å‡ºï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªç»å…¸çš„å®‰é˜²ç›‘æ§ç”»é¢ã€‚ è¿™æ˜¯ä¸€ä¸ªå¤š channel è½¬ç çš„ä¾‹å­ã€‚H265 çš„è§£ç ï¼ˆé»„è‰²éƒ¨åˆ†ï¼‰çš„è¾“å‡ºä¼šè¢«æ’ä»¶ tee ä»¥åªè¯»çš„æ–¹å¼åˆ†åˆ«é€ç»™ 4 è·¯ encoderï¼Œåˆ†åˆ«æ˜¯ä½¿ç”¨ VAAPI åŠ é€Ÿçš„ H265 ç¼–ç å™¨ï¼ˆæ©™è‰²éƒ¨åˆ†ï¼‰ï¼Œä½¿ç”¨ VAAPI åŠ é€Ÿçš„ VP9 ç¼–ç å™¨ï¼ˆè“è‰²éƒ¨åˆ†ï¼‰ï¼Œä½¿ç”¨ VAAPI åŠ é€Ÿçš„ AV1 ç¼–ç å™¨ï¼ˆç»¿è‰²éƒ¨åˆ†ï¼‰å’Œè½¯ä»¶çš„ x264 çš„ç¼–ç å™¨ã€‚è¿™æ¡ pipeline å¯ä»¥åŒæ—¶å®Œæˆ 1 å¯¹ 4 çš„è½¬ç ï¼Œè€Œè§£ç åªéœ€ä¸€æ¬¡ï¼Œæ¯”è¾ƒçœèµ„æºã€‚ è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ DL Streamer è¿›è¡Œäººè„¸è¯†åˆ«çš„ä¾‹å­ã€‚å…¶ä¸­è“è‰²æ–¹å—è¡¨ç¤º DL Streamer çš„æ’ä»¶ã€‚å®Œæˆ decode åï¼ŒDL Streamer çš„æ’ä»¶ä¼šåš face detectionã€age/gender classificationã€ emotion recognitionï¼ˆå³è¯†åˆ«è¡¨æƒ…ã€å¹´é¾„ï¼‰ç­‰ï¼Œç„¶åä¼šåš watermarkï¼Œå…¶å°†ä¼ è¾“ä¸‹æ¥çš„å‰é¢æ¯ä¸€çº§è¯†åˆ«çš„ä¿¡æ¯æ•°æ®ç”»ä¸Šå»ï¼Œæœ€ç»ˆä¼ ç»™ display è¿›è¡Œæ˜¾ç¤ºã€‚Gstreamer çš„æ–¹ä¾¿ä¹‹å¤„åœ¨äºï¼Œå¯ä»¥éšæ„æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ä¸Šè¿°æµç¨‹ä¸­çš„ä»»ä¸€çº§ï¼Œæ¯”å¦‚åœ¨è„šæœ¬é‡Œåˆ æ‰ face detection æˆ– emotion recognitionï¼Œå°±ä¸ä¼šå†åš face detection æˆ– emotion recognitionã€‚ è¿™æ˜¯ä¸€ä¸ªè¯†åˆ« audio çš„ä¾‹å­ã€‚å®Œæˆ decode åï¼Œç»è¿‡ audio resample å’Œ audio convert è¿™ä¸¤ä¸ªåŸºæœ¬çš„ audio å¤„ç†ï¼Œç„¶åå°†å†…å®¹ä¼ é€ç»™ audio detect ç­‰ deep learning æ’ä»¶ï¼Œæœ€åè¯†åˆ«å‡ºæ¥å›¾ä¸­æ˜¯ç‹—åœ¨å«ã€‚å®Œæˆ decode åçš„å¦ä¸€è·¯ä¼šåš object detectionï¼Œè¯†åˆ«å‡ºç‹—çš„å¤§æ¦‚ä½ç½®ï¼Œç„¶åå°†ç‹—æ¡†å‡ºã€‚è¿™æ˜¯ä¸€ä¸ªç”¨ Gstreamer æ­å»ºçš„å…¸å‹çš„å¸¦æœ‰ deep learning çš„ pipelineï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚\n","permalink":"http://localhost:1313/posts/media/about-video-processing-and-hardware-acceleration-in-gstreamer/","summary":"å…³äº Gstreamer ä¸­çš„è§†é¢‘å¤„ç†ä¸ç¡¬ä»¶åŠ é€Ÿ \u0026ndash;èŠ‚é€‰è‡ªã€ŠLiveVideoStackCon2022 ä¸Šæµ·ç«™å¤§ä¼šï¼Œ è‹±ç‰¹å°”åŠ é€Ÿè®¡ç®—ç³»ç»Ÿä¸å›¾å½¢éƒ¨å·¥ç¨‹å¸ˆä½•ä¿Šå½¦ï¼ŒGstreamer çš„æ¡†æ¶å’Œç‰¹ç‚¹ï¼Œè§†é¢‘çš„æ¨¡å—åŒ–å¤„ç†ï¼Œä»¥åŠå…¶ç¡¬ä»¶åŠ é€Ÿçš„å®ç°ä¸åº”ç”¨æ¡ˆä¾‹ã€‹\nBasic Idea è¿™æ˜¯ Gstreamer ä¸­ä¸€ä¸ª element çš„åŸºæœ¬å½¢å¼ã€‚ä¸¤ç«¯çš„ pad æ¥è´Ÿè´£è¾“å…¥å’Œè¾“å‡ºï¼Œè€Œç”±å½“ä¸­çš„ element æ¥å®Œæˆå…·ä½“å·¥ä½œã€‚æ¯”å¦‚ä¸€ä¸ª decoderï¼Œè¾“å…¥æ˜¯ H264 çš„ç æµï¼Œè¾“å‡ºåˆ™æ˜¯ decoded æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è§†é¢‘å¸§ï¼Œæ‰€ä»¥æ­¤å¤„çš„ element å°±å¯ä»¥å®ç°ä¸ºä¸€ä¸ªå®Œæ•´çš„ H264 çš„è§£ç å™¨ã€‚è¯¥è§£ç å™¨çš„å®ç°å¯ä»¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„å†…éƒ¨å®ç°ï¼Œä¹Ÿå¯ä»¥å°è£…å·²æœ‰çš„å¤–éƒ¨è§£ç å™¨æ¥å®ç°ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ OpenH264 é¡¹ç›® build æˆ library çš„å½¢å¼å¹¶é€‚å½“å°è£…ï¼Œåœ¨æ­¤ element ä¸­ç›´æ¥è°ƒç”¨ï¼Œä»è€Œå®ç°è¯¥ H264 è§£ç å™¨æ’ä»¶çš„åŠŸèƒ½ã€‚\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™é‡Œçš„è¾“å…¥è¾“å‡ºæ ¼å¼æ˜¯éå¸¸éšæ„çš„ï¼Œç”šè‡³è¾“å…¥å¯ä»¥æ˜¯ videoï¼Œè¾“å‡ºæ˜¯ audioï¼Œè¿™å°±ä½¿æ’ä»¶çš„è®¾è®¡æœ‰äº†æ›´å¤§æ›´çµæ´»çš„ç©ºé—´ã€‚æ¯”å¦‚æˆ‘ä»¬å½•å–äº†ä¸€ä¸ªè§†é¢‘ï¼Œè§†é¢‘é‡Œçš„æ¯ä¸€å¸§éƒ½æ˜¯æ‹çš„æŸæœ¬ä¹¦çš„ä¸€é¡µï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥è®¾è®¡è¿™æ ·ä¸€ä¸ª pipelineï¼Œå…¶ä¸­ä¸€ä¸ª element å°† video è½¬æ¢æˆ textï¼Œç„¶åè¿æ¥å¦ä¸€ä¸ª elementï¼Œå…¶æ¥å— text è¾“å…¥ï¼Œå¹¶ç”¨è¯­éŸ³å°†å…¶å…¨éƒ¨è¯»å‡ºå¹¶è¾“å‡º audioï¼Œä»è€Œå®Œæˆäº†å°†æ•´æœ¬ä¹¦è½¬æˆ audio çš„åŠŸèƒ½ã€‚è¿™äº› element çš„è®¾è®¡æ–¹å¼åœ¨ Gstreamer æ˜¯è¢«å®Œå…¨å…è®¸çš„ã€‚å½“ç„¶ï¼ŒFFmpeg ä¹Ÿèƒ½å®Œæˆä¸Šè¿°åŠŸèƒ½ï¼Œä½†åœ¨æäº¤ä»£ç åˆ°ç¤¾åŒºå’Œ upstream è¿‡ç¨‹ä¸­ä¼šæœ‰é‡åˆ°å¾ˆå¤§çš„éº»çƒ¦å’ŒæŒ‘æˆ˜ï¼Œå› ä¸ºè¿™ç§ video è½¬ text æˆ–è€… text è½¬ audio çš„æ¨¡å¼ï¼Œåœ¨ FFmpeg ä¸­å¹¶æ²¡æœ‰ç°æˆçš„å½’ç±»ï¼Œä¹Ÿè®¸éœ€è¦ä½ æå‡ºæ–°çš„ filter ç±»å‹æˆ–æ–°çš„æ¨¡å¼ã€‚ è¿™æ˜¯æ›´å¤š element çš„ç±»å‹ï¼Œdemuxer å¯¹åº” FFmpeg é‡Œçš„ av input formatï¼Œsource element å¯¹åº”äº FFmpeg é‡Œçš„ URLï¼Œç”¨æ¥äº§ç”Ÿæºè¾“å…¥ï¼Œfilter element åˆ™å¯¹åº”äº FFmpeg é‡Œçš„ filterã€‚æ€»çš„æ¥è¯´ï¼Œè¿™äº›å†…å®¹æœ‰ä¸ FFmpeg ç›¸ä¼¼çš„åœ°æ–¹ï¼Œä½†æ˜¯ä¼šä»¥ element çš„å½¢å¼è¿›è¡Œç®¡ç†ï¼Œæœ€åç”¨ pipeline å°†è¿™äº›å†…å®¹è¿æ¥åœ¨ä¸€èµ·ï¼Œç”±ç¬¬ä¸€ä¸ªå‘æœ€åä¸€ä¸ªæ¨é€æ•°æ®ã€‚ åœ¨ç”µå­æŠ€æœ¯ï¼ˆç‰¹åˆ«æ˜¯æ•°å­—ç”µè·¯ï¼‰ä¸­ï¼Œæ•°æ®é€‰æ‹©å™¨ï¼ˆè‹±è¯­ï¼šData Selectorï¼‰ï¼Œæˆ–ç§°å¤šè·¯å¤ç”¨å™¨ï¼ˆè‹±è¯­ï¼šmultiplexerï¼Œç®€ç§°ï¼šMUXï¼‰æ˜¯ä¸€ç§å¯ä»¥ä»å¤šä¸ªæ¨¡æ‹Ÿæˆ–æ•°å­—è¾“å…¥ä¿¡å·ä¸­é€‰æ‹©ä¸€ä¸ªä¿¡å·è¿›è¡Œè¾“å‡ºçš„å™¨ä»¶\u0026gt; 1ã€‚ä¸€ä¸ªæœ‰ 2^n è¾“å…¥ç«¯çš„æ•°æ®é€‰æ‹©å™¨æœ‰ n ä¸ªå¯é€‰æ‹©çš„è¾“å…¥-è¾“å‡ºçº¿è·¯ï¼Œå¯ä»¥é€šè¿‡æ§åˆ¶ç«¯æ¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ªä¿¡å·ä½œä¸ºè¾“å‡º 1ã€‚æ•°æ®é€‰æ‹©å™¨ä¸»è¦ç”¨äºå¢åŠ ä¸€å®šé‡çš„æ—¶é—´å’Œå¸¦å®½å†…çš„å¯ä»¥é€šè¿‡ç½‘ç»œå‘é€çš„æ•°æ®é‡ 1ã€‚å®ƒä½¿\u0026gt; å¤šä¸ªä¿¡å·å…±äº«ä¸€ä¸ªè®¾å¤‡æˆ–èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªæ¨¡æ‹Ÿæ•°å­—è½¬æ¢å™¨æˆ–ä¸€ä¸ªä¼ è¾“çº¿ï¼Œè€Œä¸å¿…ç»™æ¯ä¸€ä¸ªè¾“å…¥ä¿¡å·é…å¤‡ä¸€ä¸ªè®¾å¤‡ã€‚","title":"About Video Processing and Hardware Acceleration in Gstreamer"},{"content":"FFmpeg å’Œ GStreamer éƒ½æ˜¯å¼€æºçš„å¤šåª’ä½“æ¡†æ¶ï¼Œå®ƒä»¬åœ¨å¤„ç†éŸ³é¢‘å’Œè§†é¢‘æ–¹é¢æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚ä¸¤è€…éƒ½æä¾›äº†å¼ºå¤§çš„å·¥å…·å’Œåº“ï¼Œç”¨äºç¼–ç ã€è§£ç ã€è½¬ç ã€æµå¤„ç†ç­‰å¤šåª’ä½“æ“ä½œã€‚ä»¥ä¸‹æ˜¯å¯¹ FFmpeg å’Œ GStreamer çš„æ·±å…¥å¯¹æ¯”å’Œå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼š\nFFmpeg FFmpeg æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨äºå½•åˆ¶ã€è½¬æ¢æ•°å­—éŸ³è§†é¢‘ï¼Œå¹¶å°†å…¶è½¬æ¢æˆä¸åŒçš„æ ¼å¼ã€‚å®ƒåŒ…å«äº† libavcodec ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå¤šä¸ªé¡¹ç›®éŸ³è§†é¢‘ç¼–è§£ç çš„é¢†å…ˆåº“ã€‚FFmpeg åœ¨ Linux å¹³å°ä¸‹å¼€å‘ï¼Œä½†å®ƒå¯ä»¥åœ¨åŒ…æ‹¬ Windows åœ¨å†…çš„å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸­ç¼–è¯‘ã€‚\nç‰¹ç‚¹ï¼š\né«˜æ€§èƒ½ï¼šFFmpeg ä»¥å…¶æå¿«çš„ç¼–è§£ç é€Ÿåº¦è€Œé—»åã€‚ å¹¿æ³›çš„æ ¼å¼æ”¯æŒï¼šæ”¯æŒå‡ ä¹æ‰€æœ‰å·²çŸ¥çš„éŸ³è§†é¢‘æ ¼å¼ã€‚ å‘½ä»¤è¡Œå·¥å…·ï¼šæä¾›äº†ä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ–¹ä¾¿ç”¨æˆ·ç›´æ¥æ“ä½œã€‚ åº“æ”¯æŒï¼šå¯ä»¥ä½œä¸ºåº“åµŒå…¥åˆ°å…¶ä»–ç¨‹åºä¸­ï¼Œç”¨äºå¼€å‘å¤šåª’ä½“åº”ç”¨ç¨‹åºã€‚ åº”ç”¨åœºæ™¯ï¼š\nè§†é¢‘è½¬ç ï¼šåœ¨éœ€è¦å°†è§†é¢‘ä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼æ—¶ï¼ŒFFmpeg æ˜¯é¦–é€‰å·¥å…·ã€‚ æµåª’ä½“æœåŠ¡å™¨ï¼šä½œä¸ºæµåª’ä½“æœåŠ¡å™¨çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå®æ—¶è½¬ç å’Œæµå¤„ç†ã€‚ è§†é¢‘ç¼–è¾‘è½¯ä»¶ï¼šè®¸å¤šè§†é¢‘ç¼–è¾‘è½¯ä»¶ä½¿ç”¨ FFmpeg ä½œä¸ºå…¶ç¼–è§£ç å™¨åº“ã€‚ GStreamer GStreamer æ˜¯ä¸€ä¸ªåŸºäºæµæ°´çº¿çš„å¤šåª’ä½“æ¡†æ¶ï¼Œç”¨äºåˆ›å»ºæµåª’ä½“åº”ç”¨ç¨‹åºã€‚å®ƒçš„è®¾è®¡ç†å¿µæ˜¯åŸºäºæ’ä»¶çš„æ¶æ„ï¼Œå…è®¸å¼€å‘è€…è½»æ¾åœ°æ·»åŠ æ–°çš„ç¼–è§£ç å™¨å’ŒåŠŸèƒ½ã€‚\nç‰¹ç‚¹ï¼š\næ¨¡å—åŒ–ï¼šGStreamer çš„æ’ä»¶æ¶æ„ä½¿å¾—æ‰©å±•åŠŸèƒ½å˜å¾—ç®€å•ã€‚ ç®¡é“æ¨¡å‹ï¼šä½¿ç”¨å…ƒç´ ï¼ˆelementsï¼‰å’Œç®¡é“ï¼ˆpipelinesï¼‰æ¥æ„å»ºå¤æ‚çš„å¤šåª’ä½“å¤„ç†æµç¨‹ã€‚ è·¨å¹³å°ï¼šæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ Linuxã€Windows å’Œ macOSã€‚ å¯ç¼–ç¨‹æ€§ï¼šæä¾›äº†ä¸°å¯Œçš„ APIï¼Œé€‚åˆå¼€å‘å¤æ‚çš„åº”ç”¨ç¨‹åºã€‚ åº”ç”¨åœºæ™¯ï¼š\nå¤šåª’ä½“æ’­æ”¾å™¨ï¼šGStreamer å¸¸ç”¨äºå¼€å‘å¤šåª’ä½“æ’­æ”¾å™¨ï¼Œå› å…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚ å®æ—¶éŸ³è§†é¢‘å¤„ç†ï¼šåœ¨éœ€è¦å®æ—¶å¤„ç†éŸ³è§†é¢‘æ•°æ®çš„åº”ç”¨ä¸­ï¼Œå¦‚è§†é¢‘ä¼šè®®ç³»ç»Ÿã€‚ åµŒå…¥å¼ç³»ç»Ÿï¼šç”±äºå…¶æ¨¡å—åŒ–è®¾è®¡ï¼ŒGStreamer åœ¨èµ„æºå—é™çš„åµŒå…¥å¼ç³»ç»Ÿä¸­ä¹Ÿæœ‰åº”ç”¨ã€‚ å¯¹æ¯” æ€§èƒ½ï¼šFFmpeg åœ¨ç¼–è§£ç æ€§èƒ½ä¸Šé€šå¸¸ä¼˜äº GStreamerï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç‰¹å®šæ ¼å¼æ—¶ã€‚ çµæ´»æ€§ï¼šGStreamer çš„ç®¡é“æ¨¡å‹æä¾›äº†æ›´é«˜çš„çµæ´»æ€§ï¼Œé€‚åˆæ„å»ºå¤æ‚çš„å¤„ç†æµç¨‹ã€‚ æ˜“ç”¨æ€§ï¼šFFmpeg çš„å‘½ä»¤è¡Œå·¥å…·é€šå¸¸æ›´æ˜“äºä½¿ç”¨ï¼Œè€Œ GStreamer å¯èƒ½éœ€è¦æ›´å¤šçš„ç¼–ç¨‹çŸ¥è¯†ã€‚ ç¤¾åŒºä¸ç”Ÿæ€ï¼šä¸¤è€…éƒ½æœ‰æ´»è·ƒçš„ç¤¾åŒºï¼Œä½† FFmpeg çš„ç¤¾åŒºå¯èƒ½æ›´å¤§ä¸€äº›ï¼Œè€Œ GStreamer åœ¨æŸäº›ç‰¹å®šé¢†åŸŸï¼ˆå¦‚ Linux æ¡Œé¢ç¯å¢ƒï¼‰æœ‰æ›´æ·±çš„æ ¹æ¤ã€‚ é€‰æ‹© FFmpeg è¿˜æ˜¯ GStreamer å–å†³äºå…·ä½“çš„åº”ç”¨éœ€æ±‚ã€‚å¦‚æœéœ€è¦å¿«é€Ÿã€é«˜æ•ˆåœ°å¤„ç†éŸ³è§†é¢‘æ–‡ä»¶ï¼ŒFFmpeg å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœé¡¹ç›®éœ€è¦é«˜åº¦çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼ŒGStreamer å¯èƒ½æ›´é€‚åˆã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸¤è€…ç”šè‡³å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œä»¥å‘æŒ¥å„è‡ªçš„ä¼˜åŠ¿ã€‚\n","permalink":"http://localhost:1313/posts/media/diffrences-and-similarities-between-gstreamer-and-ffmpeg/","summary":"FFmpeg å’Œ GStreamer éƒ½æ˜¯å¼€æºçš„å¤šåª’ä½“æ¡†æ¶ï¼Œå®ƒä»¬åœ¨å¤„ç†éŸ³é¢‘å’Œè§†é¢‘æ–¹é¢æœ‰ç€å¹¿æ³›çš„åº”ç”¨ã€‚ä¸¤è€…éƒ½æä¾›äº†å¼ºå¤§çš„å·¥å…·å’Œåº“ï¼Œç”¨äºç¼–ç ã€è§£ç ã€è½¬ç ã€æµå¤„ç†ç­‰å¤šåª’ä½“æ“ä½œã€‚ä»¥ä¸‹æ˜¯å¯¹ FFmpeg å’Œ GStreamer çš„æ·±å…¥å¯¹æ¯”å’Œå„è‡ªçš„åº”ç”¨åœºæ™¯ï¼š\nFFmpeg FFmpeg æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨äºå½•åˆ¶ã€è½¬æ¢æ•°å­—éŸ³è§†é¢‘ï¼Œå¹¶å°†å…¶è½¬æ¢æˆä¸åŒçš„æ ¼å¼ã€‚å®ƒåŒ…å«äº† libavcodec ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºå¤šä¸ªé¡¹ç›®éŸ³è§†é¢‘ç¼–è§£ç çš„é¢†å…ˆåº“ã€‚FFmpeg åœ¨ Linux å¹³å°ä¸‹å¼€å‘ï¼Œä½†å®ƒå¯ä»¥åœ¨åŒ…æ‹¬ Windows åœ¨å†…çš„å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸­ç¼–è¯‘ã€‚\nç‰¹ç‚¹ï¼š\né«˜æ€§èƒ½ï¼šFFmpeg ä»¥å…¶æå¿«çš„ç¼–è§£ç é€Ÿåº¦è€Œé—»åã€‚ å¹¿æ³›çš„æ ¼å¼æ”¯æŒï¼šæ”¯æŒå‡ ä¹æ‰€æœ‰å·²çŸ¥çš„éŸ³è§†é¢‘æ ¼å¼ã€‚ å‘½ä»¤è¡Œå·¥å…·ï¼šæä¾›äº†ä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ–¹ä¾¿ç”¨æˆ·ç›´æ¥æ“ä½œã€‚ åº“æ”¯æŒï¼šå¯ä»¥ä½œä¸ºåº“åµŒå…¥åˆ°å…¶ä»–ç¨‹åºä¸­ï¼Œç”¨äºå¼€å‘å¤šåª’ä½“åº”ç”¨ç¨‹åºã€‚ åº”ç”¨åœºæ™¯ï¼š\nè§†é¢‘è½¬ç ï¼šåœ¨éœ€è¦å°†è§†é¢‘ä»ä¸€ç§æ ¼å¼è½¬æ¢ä¸ºå¦ä¸€ç§æ ¼å¼æ—¶ï¼ŒFFmpeg æ˜¯é¦–é€‰å·¥å…·ã€‚ æµåª’ä½“æœåŠ¡å™¨ï¼šä½œä¸ºæµåª’ä½“æœåŠ¡å™¨çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå®æ—¶è½¬ç å’Œæµå¤„ç†ã€‚ è§†é¢‘ç¼–è¾‘è½¯ä»¶ï¼šè®¸å¤šè§†é¢‘ç¼–è¾‘è½¯ä»¶ä½¿ç”¨ FFmpeg ä½œä¸ºå…¶ç¼–è§£ç å™¨åº“ã€‚ GStreamer GStreamer æ˜¯ä¸€ä¸ªåŸºäºæµæ°´çº¿çš„å¤šåª’ä½“æ¡†æ¶ï¼Œç”¨äºåˆ›å»ºæµåª’ä½“åº”ç”¨ç¨‹åºã€‚å®ƒçš„è®¾è®¡ç†å¿µæ˜¯åŸºäºæ’ä»¶çš„æ¶æ„ï¼Œå…è®¸å¼€å‘è€…è½»æ¾åœ°æ·»åŠ æ–°çš„ç¼–è§£ç å™¨å’ŒåŠŸèƒ½ã€‚\nç‰¹ç‚¹ï¼š\næ¨¡å—åŒ–ï¼šGStreamer çš„æ’ä»¶æ¶æ„ä½¿å¾—æ‰©å±•åŠŸèƒ½å˜å¾—ç®€å•ã€‚ ç®¡é“æ¨¡å‹ï¼šä½¿ç”¨å…ƒç´ ï¼ˆelementsï¼‰å’Œç®¡é“ï¼ˆpipelinesï¼‰æ¥æ„å»ºå¤æ‚çš„å¤šåª’ä½“å¤„ç†æµç¨‹ã€‚ è·¨å¹³å°ï¼šæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬ Linuxã€Windows å’Œ macOSã€‚ å¯ç¼–ç¨‹æ€§ï¼šæä¾›äº†ä¸°å¯Œçš„ APIï¼Œé€‚åˆå¼€å‘å¤æ‚çš„åº”ç”¨ç¨‹åºã€‚ åº”ç”¨åœºæ™¯ï¼š\nå¤šåª’ä½“æ’­æ”¾å™¨ï¼šGStreamer å¸¸ç”¨äºå¼€å‘å¤šåª’ä½“æ’­æ”¾å™¨ï¼Œå› å…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚ å®æ—¶éŸ³è§†é¢‘å¤„ç†ï¼šåœ¨éœ€è¦å®æ—¶å¤„ç†éŸ³è§†é¢‘æ•°æ®çš„åº”ç”¨ä¸­ï¼Œå¦‚è§†é¢‘ä¼šè®®ç³»ç»Ÿã€‚ åµŒå…¥å¼ç³»ç»Ÿï¼šç”±äºå…¶æ¨¡å—åŒ–è®¾è®¡ï¼ŒGStreamer åœ¨èµ„æºå—é™çš„åµŒå…¥å¼ç³»ç»Ÿä¸­ä¹Ÿæœ‰åº”ç”¨ã€‚ å¯¹æ¯” æ€§èƒ½ï¼šFFmpeg åœ¨ç¼–è§£ç æ€§èƒ½ä¸Šé€šå¸¸ä¼˜äº GStreamerï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç‰¹å®šæ ¼å¼æ—¶ã€‚ çµæ´»æ€§ï¼šGStreamer çš„ç®¡é“æ¨¡å‹æä¾›äº†æ›´é«˜çš„çµæ´»æ€§ï¼Œé€‚åˆæ„å»ºå¤æ‚çš„å¤„ç†æµç¨‹ã€‚ æ˜“ç”¨æ€§ï¼šFFmpeg çš„å‘½ä»¤è¡Œå·¥å…·é€šå¸¸æ›´æ˜“äºä½¿ç”¨ï¼Œè€Œ GStreamer å¯èƒ½éœ€è¦æ›´å¤šçš„ç¼–ç¨‹çŸ¥è¯†ã€‚ ç¤¾åŒºä¸ç”Ÿæ€ï¼šä¸¤è€…éƒ½æœ‰æ´»è·ƒçš„ç¤¾åŒºï¼Œä½† FFmpeg çš„ç¤¾åŒºå¯èƒ½æ›´å¤§ä¸€äº›ï¼Œè€Œ GStreamer åœ¨æŸäº›ç‰¹å®šé¢†åŸŸï¼ˆå¦‚ Linux æ¡Œé¢ç¯å¢ƒï¼‰æœ‰æ›´æ·±çš„æ ¹æ¤ã€‚ é€‰æ‹© FFmpeg è¿˜æ˜¯ GStreamer å–å†³äºå…·ä½“çš„åº”ç”¨éœ€æ±‚ã€‚å¦‚æœéœ€è¦å¿«é€Ÿã€é«˜æ•ˆåœ°å¤„ç†éŸ³è§†é¢‘æ–‡ä»¶ï¼ŒFFmpeg å¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å¦‚æœé¡¹ç›®éœ€è¦é«˜åº¦çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼ŒGStreamer å¯èƒ½æ›´é€‚åˆã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸¤è€…ç”šè‡³å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œä»¥å‘æŒ¥å„è‡ªçš„ä¼˜åŠ¿ã€‚","title":"Diffrences and Similarities Between Gstreamer and FFmpeg"},{"content":"åœ¨ C++ ä¸­ï¼Œç±»å‹è½¬æ¢æ˜¯ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡å’ŒæŒ‡é’ˆæ—¶ã€‚ä»¥ä¸‹æ˜¯å››ç§ C++ ç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„é€‚ç”¨åœºæ™¯ï¼š\nstatic_cast: ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œå¦‚å°† int è½¬æ¢ä¸º floatã€‚ ç”¨äºç±»å±‚æ¬¡ç»“æ„ä¸­å‘ä¸Šè½¬å‹ï¼ˆä»æ´¾ç”Ÿç±»æŒ‡é’ˆè½¬æ¢ä¸ºåŸºç±»æŒ‡é’ˆï¼‰ã€‚ å¯ä»¥è°ƒç”¨ç±»å‹çš„æ˜¾å¼è½¬æ¢æ„é€ å‡½æ•°æˆ–è½¬æ¢è¿ç®—ç¬¦ã€‚ ç¤ºä¾‹ï¼š int i = 42; float f = static_cast\u0026lt;float\u0026gt;(i); // å°† int è½¬æ¢ä¸º float reinterpret_cast: ç”¨äºæŒ‡é’ˆç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œä½†ä¸æ”¹å˜æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜å†…å®¹ã€‚ å¯ä»¥å°†æŒ‡é’ˆè½¬æ¢ä¸ºè¶³å¤Ÿå¤§çš„æ•´æ•°ç±»å‹ï¼Œåä¹‹äº¦ç„¶ã€‚ é€šå¸¸ç”¨äºåº•å±‚æ“ä½œï¼Œå¦‚æ“ä½œç¡¬ä»¶æˆ–è¿›è¡Œä¸å¹³å°ç›¸å…³çš„è°ƒç”¨ã€‚ ç¤ºä¾‹ï¼š int* p = new int(42); void* v = reinterpret_cast\u0026lt;void*\u0026gt;(p); // å°† int* è½¬æ¢ä¸º void* const_cast: ç”¨äºæ·»åŠ æˆ–ç§»é™¤å¯¹è±¡çš„ const å±æ€§ã€‚ åªèƒ½ç”¨äºç›¸åŒç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œä¸èƒ½æ”¹å˜ç±»å‹æœ¬èº«ã€‚ é€šå¸¸ç”¨äºè°ƒç”¨é‚£äº›å‚æ•°ä¸ºé const çš„å‡½æ•°ï¼Œè€Œä½ æœ‰ä¸€ä¸ª const å¯¹è±¡ã€‚ ç¤ºä¾‹ï¼š const int* cp = \u0026amp;i; int* p = const_cast\u0026lt;int*\u0026gt;(cp); // ç§»é™¤ const å±æ€§ dynamic_cast: ä¸»è¦ç”¨äºç±»å±‚æ¬¡ç»“æ„ä¸­çš„å®‰å…¨å‘ä¸‹è½¬å‹ï¼ˆä»åŸºç±»æŒ‡é’ˆè½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆï¼‰ã€‚ åœ¨è½¬æ¢æ— æ•ˆæ—¶ä¼šè¿”å› nullptrï¼Œå› æ­¤æ¯” static_cast æ›´å®‰å…¨ã€‚ éœ€è¦è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼ˆRTTIï¼‰æ”¯æŒã€‚ ç¤ºä¾‹ï¼š Base* b = new Derived(); Derived* d = dynamic_cast\u0026lt;Derived*\u0026gt;(b); // å®‰å…¨å‘ä¸‹è½¬å‹ åœ¨é€‰æ‹©ä½¿ç”¨å“ªç§ç±»å‹è½¬æ¢æ—¶ï¼Œåº”è€ƒè™‘è½¬æ¢çš„å®‰å…¨æ€§å’Œç›®çš„ã€‚static_cast æ˜¯æœ€å¸¸ç”¨çš„è½¬æ¢ç±»å‹ï¼Œé€‚ç”¨äºå¤§å¤šæ•°éå¤šæ€ç±»å‹è½¬æ¢ã€‚reinterpret_cast æ˜¯æœ€ä¸å®‰å…¨çš„ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚const_cast é€šå¸¸ç”¨äºç§»é™¤ const å±æ€§ä»¥ä¾¿äºç‰¹å®šå‡½æ•°çš„è°ƒç”¨ã€‚dynamic_cast åœ¨å¤šæ€ç±»å‹è½¬æ¢ä¸­æä¾›äº†ç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œä½†æ€§èƒ½å¼€é”€è¾ƒå¤§ 12345ã€‚\nè¯·æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç±»å‹è½¬æ¢è¿ç®—ç¬¦ã€‚\n","permalink":"http://localhost:1313/posts/c++/type-casts-in-c++/","summary":"åœ¨ C++ ä¸­ï¼Œç±»å‹è½¬æ¢æ˜¯ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡å’ŒæŒ‡é’ˆæ—¶ã€‚ä»¥ä¸‹æ˜¯å››ç§ C++ ç±»å‹è½¬æ¢è¿ç®—ç¬¦çš„é€‚ç”¨åœºæ™¯ï¼š\nstatic_cast: ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œå¦‚å°† int è½¬æ¢ä¸º floatã€‚ ç”¨äºç±»å±‚æ¬¡ç»“æ„ä¸­å‘ä¸Šè½¬å‹ï¼ˆä»æ´¾ç”Ÿç±»æŒ‡é’ˆè½¬æ¢ä¸ºåŸºç±»æŒ‡é’ˆï¼‰ã€‚ å¯ä»¥è°ƒç”¨ç±»å‹çš„æ˜¾å¼è½¬æ¢æ„é€ å‡½æ•°æˆ–è½¬æ¢è¿ç®—ç¬¦ã€‚ ç¤ºä¾‹ï¼š int i = 42; float f = static_cast\u0026lt;float\u0026gt;(i); // å°† int è½¬æ¢ä¸º float reinterpret_cast: ç”¨äºæŒ‡é’ˆç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œä½†ä¸æ”¹å˜æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜å†…å®¹ã€‚ å¯ä»¥å°†æŒ‡é’ˆè½¬æ¢ä¸ºè¶³å¤Ÿå¤§çš„æ•´æ•°ç±»å‹ï¼Œåä¹‹äº¦ç„¶ã€‚ é€šå¸¸ç”¨äºåº•å±‚æ“ä½œï¼Œå¦‚æ“ä½œç¡¬ä»¶æˆ–è¿›è¡Œä¸å¹³å°ç›¸å…³çš„è°ƒç”¨ã€‚ ç¤ºä¾‹ï¼š int* p = new int(42); void* v = reinterpret_cast\u0026lt;void*\u0026gt;(p); // å°† int* è½¬æ¢ä¸º void* const_cast: ç”¨äºæ·»åŠ æˆ–ç§»é™¤å¯¹è±¡çš„ const å±æ€§ã€‚ åªèƒ½ç”¨äºç›¸åŒç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œä¸èƒ½æ”¹å˜ç±»å‹æœ¬èº«ã€‚ é€šå¸¸ç”¨äºè°ƒç”¨é‚£äº›å‚æ•°ä¸ºé const çš„å‡½æ•°ï¼Œè€Œä½ æœ‰ä¸€ä¸ª const å¯¹è±¡ã€‚ ç¤ºä¾‹ï¼š const int* cp = \u0026amp;i; int* p = const_cast\u0026lt;int*\u0026gt;(cp); // ç§»é™¤ const å±æ€§ dynamic_cast: ä¸»è¦ç”¨äºç±»å±‚æ¬¡ç»“æ„ä¸­çš„å®‰å…¨å‘ä¸‹è½¬å‹ï¼ˆä»åŸºç±»æŒ‡é’ˆè½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆï¼‰ã€‚ åœ¨è½¬æ¢æ— æ•ˆæ—¶ä¼šè¿”å› nullptrï¼Œå› æ­¤æ¯” static_cast æ›´å®‰å…¨ã€‚ éœ€è¦è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼ˆRTTIï¼‰æ”¯æŒã€‚ ç¤ºä¾‹ï¼š Base* b = new Derived(); Derived* d = dynamic_cast\u0026lt;Derived*\u0026gt;(b); // å®‰å…¨å‘ä¸‹è½¬å‹ åœ¨é€‰æ‹©ä½¿ç”¨å“ªç§ç±»å‹è½¬æ¢æ—¶ï¼Œåº”è€ƒè™‘è½¬æ¢çš„å®‰å…¨æ€§å’Œç›®çš„ã€‚static_cast æ˜¯æœ€å¸¸ç”¨çš„è½¬æ¢ç±»å‹ï¼Œé€‚ç”¨äºå¤§å¤šæ•°éå¤šæ€ç±»å‹è½¬æ¢ã€‚reinterpret_cast æ˜¯æœ€ä¸å®‰å…¨çš„ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚const_cast é€šå¸¸ç”¨äºç§»é™¤ const å±æ€§ä»¥ä¾¿äºç‰¹å®šå‡½æ•°çš„è°ƒç”¨ã€‚dynamic_cast åœ¨å¤šæ€ç±»å‹è½¬æ¢ä¸­æä¾›äº†ç±»å‹å®‰å…¨æ£€æŸ¥ï¼Œä½†æ€§èƒ½å¼€é”€è¾ƒå¤§ 12345ã€‚","title":"Type Casts in C++"},{"content":"Letâ€™s explore some examples of using std::unique_ptr, std::shared_ptr, and std::weak_ptr in C++.\nstd::unique_ptr: std::unique_ptr is designed for exclusive ownership of a dynamically allocated object. It ensures that there can be at most one unique_ptr pointing to any resource. When the unique_ptr is destroyed, the resource it points to is automatically reclaimed. You cannot make a copy of a unique_ptr, but you can move it using the new move semantics. Example:\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;memory\u0026gt; int main() { std::unique_ptr\u0026lt;int\u0026gt; uptr(new int(42)); std::cout \u0026lt;\u0026lt; \u0026#34;Value: \u0026#34; \u0026lt;\u0026lt; *uptr \u0026lt;\u0026lt; std::endl; // Moving ownership to another unique_ptr std::unique_ptr\u0026lt;int\u0026gt; uptr2 = std::move(uptr); std::cout \u0026lt;\u0026lt; \u0026#34;Value (moved): \u0026#34; \u0026lt;\u0026lt; *uptr2 \u0026lt;\u0026lt; std::endl; // uptr is now empty return 0; } In this example, uptr2 takes ownership of the dynamically allocated integer, and uptr becomes empty after the move.\nstd::shared_ptr: std::shared_ptr allows multiple pointers to share ownership of the same resource. When the last shared_ptr pointing to a resource is destroyed, the resource is deallocated. Example:\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;memory\u0026gt; int main() { std::shared_ptr\u0026lt;int\u0026gt; sptr1 = std::make_shared\u0026lt;int\u0026gt;(10); std::shared_ptr\u0026lt;int\u0026gt; sptr2 = sptr1; // Both share ownership std::cout \u0026lt;\u0026lt; \u0026#34;Value (sptr1): \u0026#34; \u0026lt;\u0026lt; *sptr1 \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;Value (sptr2): \u0026#34; \u0026lt;\u0026lt; *sptr2 \u0026lt;\u0026lt; std::endl; // When both sptr1 and sptr2 go out of scope, the resource is deallocated return 0; } In this example, both sptr1 and sptr2 share ownership of the integer value 10.\nstd::weak_ptr: std::weak_ptr represents a weak form of shared ownership. It doesnâ€™t affect the reference count of the resource. You can convert a weak_ptr to a shared_ptr on-demand if the resource still exists. Example:\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;memory\u0026gt; int main() { std::shared_ptr\u0026lt;int\u0026gt; sharedPtr = std::make_shared\u0026lt;int\u0026gt;(20); std::weak_ptr\u0026lt;int\u0026gt; weakPtr = sharedPtr; // Access the resource through weakPtr (if it still exists) if (auto lockedPtr = weakPtr.lock()) { std::cout \u0026lt;\u0026lt; \u0026#34;Value (weakPtr): \u0026#34; \u0026lt;\u0026lt; *lockedPtr \u0026lt;\u0026lt; std::endl; } else { std::cout \u0026lt;\u0026lt; \u0026#34;Resource no longer exists.\u0026#34; \u0026lt;\u0026lt; std::endl; } // When sharedPtr goes out of scope, the resource is deallocated return 0; } In this example, weakPtr allows access to the resource if it still exists, but it doesnâ€™t prevent deallocation. Remember to choose the appropriate smart pointer based on your ownership requirements and resource-sharing needs!\n","permalink":"http://localhost:1313/posts/c++/smart-pointers-in-c++/","summary":"Letâ€™s explore some examples of using std::unique_ptr, std::shared_ptr, and std::weak_ptr in C++.\nstd::unique_ptr: std::unique_ptr is designed for exclusive ownership of a dynamically allocated object. It ensures that there can be at most one unique_ptr pointing to any resource. When the unique_ptr is destroyed, the resource it points to is automatically reclaimed. You cannot make a copy of a unique_ptr, but you can move it using the new move semantics. Example:","title":"Smart Pointers in C++"},{"content":"How to implementing a group call feature for multiple users using WebRTC involves managing multiple peer connections and ensuring efficient data transfer among all participants. Hereâ€™s a high-level overview of the steps you might take to enable group video calls for up to 8 users:\nSignaling Server: Set up a signaling server to coordinate communication between clients. This server will handle session initiation, participant management, and message passing between peers. Peer Connections: Each user will establish a peer connection with every other user in the group call. This means that in a group of 8 users, each user will maintain 7 peer connections. Media Streams: Capture and distribute media streams (audio/video) from each user to all other users. Youâ€™ll need to ensure that each userâ€™s stream is sent to every other participant. Scalability: To scale the application for multiple users, consider using a mesh network topology for a small number of users or a Selective Forwarding Unit (SFU) for larger groups to reduce bandwidth requirements. User Interface: Develop a user interface that can display multiple video streams simultaneously and allow users to control their audio and video settings. Group Management: Implement features for managing the group call, such as adding or removing participants, muting/unmuting users, and handling network issues. For a practical implementation, you can refer to existing projects and tutorials that demonstrate the setup of multi-peer connections in WebRTC. Online tutorials and courses can guide you through managing dynamic multi-peer connections and setting up a fully-featured group video chat application. By following these guidelines and referring to the provided resources, you should be able to implement a robust group call feature in your WebRTC solution. Good luck with your coding! ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»\nå®ç°å¤šç”¨æˆ·ä½¿ç”¨ WebRTC è¿›è¡Œç¾¤ç»„é€šè¯æ¶‰åŠç®¡ç†å¤šä¸ªå¯¹ç­‰è¿æ¥å¹¶ç¡®ä¿æ‰€æœ‰å‚ä¸è€…ä¹‹é—´æœ‰æ•ˆçš„æ•°æ®ä¼ è¾“ã€‚ä»¥ä¸‹æ˜¯æ‚¨å¯èƒ½é‡‡å–çš„æ­¥éª¤ï¼Œä»¥ä½¿å¤šè¾¾ 8 ä½ç”¨æˆ·èƒ½å¤Ÿè¿›è¡Œç¾¤ç»„è§†é¢‘é€šè¯çš„é«˜çº§æ¦‚è¿°ï¼š\nä¿¡ä»¤æœåŠ¡å™¨ï¼š è®¾ç½®ä¸€ä¸ªä¿¡ä»¤æœåŠ¡å™¨æ¥åè°ƒå®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡ã€‚è¯¥æœåŠ¡å™¨å°†å¤„ç†ä¼šè¯å¯åŠ¨ã€å‚ä¸è€…ç®¡ç†å’Œåœ¨å¯¹ç­‰æ–¹ä¹‹é—´ä¼ é€’æ¶ˆæ¯ã€‚ å¯¹ç­‰è¿æ¥ï¼š æ¯ä¸ªç”¨æˆ·å°†ä¸ç¾¤ç»„é€šè¯ä¸­çš„æ¯ä¸ªå…¶ä»–ç”¨æˆ·å»ºç«‹å¯¹ç­‰è¿æ¥ã€‚è¿™æ„å‘³ç€åœ¨ 8 ä½ç”¨æˆ·çš„ç¾¤ç»„ä¸­ï¼Œæ¯ä¸ªç”¨æˆ·å°†ç»´æŠ¤ 7 ä¸ªå¯¹ç­‰è¿æ¥ã€‚ åª’ä½“æµï¼š æ•è·å¹¶åˆ†å‘æ¥è‡ªæ¯ä¸ªç”¨æˆ·çš„åª’ä½“æµï¼ˆéŸ³é¢‘/è§†é¢‘ï¼‰åˆ°æ‰€æœ‰å…¶ä»–ç”¨æˆ·ã€‚æ‚¨éœ€è¦ç¡®ä¿æ¯ä¸ªç”¨æˆ·çš„æµè¢«å‘é€åˆ°æ¯ä¸ªå…¶ä»–å‚ä¸è€…ã€‚ å¯æ‰©å±•æ€§ï¼š ä¸ºäº†ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿæ”¯æŒå¤šç”¨æˆ·ï¼Œè€ƒè™‘ä½¿ç”¨ç½‘çŠ¶ç½‘ç»œæ‹“æ‰‘ç»“æ„æ¥é€‚åº”å°å‹ç”¨æˆ·ç¾¤ï¼Œæˆ–è€…å¯¹äºæ›´å¤§çš„ç¾¤ç»„ä½¿ç”¨é€‰æ‹©æ€§è½¬å‘å•å…ƒï¼ˆSFUï¼‰æ¥å‡å°‘å¸¦å®½éœ€æ±‚ã€‚ ç”¨æˆ·ç•Œé¢ï¼š å¼€å‘ä¸€ä¸ªèƒ½å¤ŸåŒæ—¶æ˜¾ç¤ºå¤šä¸ªè§†é¢‘æµçš„ç”¨æˆ·ç•Œé¢ï¼Œå¹¶å…è®¸ç”¨æˆ·æ§åˆ¶ä»–ä»¬çš„éŸ³é¢‘å’Œè§†é¢‘è®¾ç½®ã€‚ ç¾¤ç»„ç®¡ç†ï¼š å®ç°ç®¡ç†ç¾¤ç»„é€šè¯çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ·»åŠ æˆ–ç§»é™¤å‚ä¸è€…ã€é™éŸ³/å–æ¶ˆé™éŸ³ç”¨æˆ·ä»¥åŠå¤„ç†ç½‘ç»œé—®é¢˜ã€‚ å¯¹äºå®é™…å®ç°ï¼Œæ‚¨å¯ä»¥å‚è€ƒç°æœ‰çš„é¡¹ç›®å’Œæ•™ç¨‹ï¼Œè¿™äº›é¡¹ç›®å’Œæ•™ç¨‹æ¼”ç¤ºäº†åœ¨ WebRTC ä¸­è®¾ç½®å¤šå¯¹ç­‰è¿æ¥ã€‚åœ¨çº¿æ•™ç¨‹å’Œè¯¾ç¨‹å¯ä»¥æŒ‡å¯¼æ‚¨ç®¡ç†åŠ¨æ€å¤šå¯¹ç­‰è¿æ¥ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªåŠŸèƒ½é½å…¨çš„ç¾¤ç»„è§†é¢‘èŠå¤©åº”ç”¨ç¨‹åºã€‚ æŒ‰ç…§è¿™äº›æŒ‡å—å¹¶å‚è€ƒæä¾›çš„èµ„æºï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨æ‚¨çš„ WebRTC è§£å†³æ–¹æ¡ˆä¸­å®ç°ä¸€ä¸ªå¥å£®çš„ç¾¤ç»„é€šè¯åŠŸèƒ½ã€‚ç¥æ‚¨ç¼–ç é¡ºåˆ©ï¼ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»\n","permalink":"http://localhost:1313/posts/how-to-implementing-a-group-call-feature-for-multiple-users-using-webrtc/","summary":"How to implementing a group call feature for multiple users using WebRTC involves managing multiple peer connections and ensuring efficient data transfer among all participants. Hereâ€™s a high-level overview of the steps you might take to enable group video calls for up to 8 users:\nSignaling Server: Set up a signaling server to coordinate communication between clients. This server will handle session initiation, participant management, and message passing between peers. Peer Connections: Each user will establish a peer connection with every other user in the group call.","title":"How to Implementing a Group Call Feature for Multiple Users Using WebRTC"},{"content":"Chainlink VRF (Verifiable Random Function) and Chainlink Automation are two distinct services provided by Chainlink that offer different functionalities for smart contracts on blockchain networks.\nChainlink VRF is a provably fair and verifiable random number generator (RNG) designed for smart contracts that require a high degree of randomness, such as in gaming or for the random assignment of duties and resources. It generates random values along with cryptographic proof of how those values were determined. The proof is published and verified on-chain before any consuming applications can use it, ensuring that the results cannot be tampered with or manipulated by any entity1.\nChainlink Automation, on the other hand, is a service that automates smart contract executions. It allows developers to register â€œupkeeps,â€ which are conditions or triggers that, when met, will automatically execute certain functions of a smart contract. This is particularly useful for contracts that need to perform regular maintenance tasks, such as updating variables based on external data sources or managing subscription payments2.\nTogether, these services can be used to enhance the capabilities of decentralized applications by providing reliable randomness and automated contract execution. For example, Chainlink VRF can be used to randomize the metadata for NFTs, and Chainlink Automation can be used to set trigger conditions for when the NFT metadata is revealed, such as via batch size or time interval parameters3.\nChainlink VRFï¼ˆå¯éªŒè¯éšæœºå‡½æ•°ï¼‰å’ŒChainlink Automation (è‡ªåŠ¨åŒ–æ™ºèƒ½åˆçº¦æ‰§è¡Œ) æ˜¯ Chainlink æä¾›çš„ä¸¤é¡¹ä¸åŒæœåŠ¡ï¼Œå®ƒä»¬ä¸ºåŒºå—é“¾ç½‘ç»œä¸Šçš„æ™ºèƒ½åˆçº¦æä¾›ä¸åŒçš„åŠŸèƒ½ã€‚\nChainlink VRFï¼ˆå¯éªŒè¯éšæœºå‡½æ•°ï¼‰ æ˜¯ä¸€ä¸ªå…¬å¹³å¯éªŒè¯çš„éšæœºæ•°ç”Ÿæˆå™¨ï¼ˆRNGï¼‰ï¼Œä¸“ä¸ºéœ€è¦é«˜åº¦éšæœºæ€§çš„æ™ºèƒ½åˆçº¦è®¾è®¡ï¼Œå¦‚æ¸¸æˆæˆ–éšæœºåˆ†é…ä»»åŠ¡å’Œèµ„æºã€‚å®ƒç”Ÿæˆéšæœºå€¼ä»¥åŠå¦‚ä½•ç¡®å®šè¿™äº›å€¼çš„åŠ å¯†è¯æ˜ã€‚åœ¨ä»»ä½•ä½¿ç”¨åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨å®ƒä¹‹å‰ï¼Œè¯æ˜ä¼šè¢«å‘å¸ƒå¹¶åœ¨é“¾ä¸ŠéªŒè¯ï¼Œç¡®ä¿ç»“æœä¸èƒ½è¢«ä»»ä½•å®ä½“ç¯¡æ”¹æˆ–æ“çºµã€‚\nå¦ä¸€æ–¹é¢ï¼Œ**Chainlink Automation (è‡ªåŠ¨åŒ–æ™ºèƒ½åˆçº¦æ‰§è¡Œ)**æ˜¯ä¸€é¡¹è‡ªåŠ¨åŒ–æ™ºèƒ½åˆçº¦æ‰§è¡Œçš„æœåŠ¡ã€‚å®ƒå…è®¸å¼€å‘è€…æ³¨å†Œâ€œupkeepsâ€ï¼Œå³å½“æ»¡è¶³ç‰¹å®šæ¡ä»¶æˆ–è§¦å‘å™¨æ—¶ï¼Œå°†è‡ªåŠ¨æ‰§è¡Œæ™ºèƒ½åˆçº¦çš„æŸäº›åŠŸèƒ½ã€‚è¿™å¯¹äºéœ€è¦æ‰§è¡Œå®šæœŸç»´æŠ¤ä»»åŠ¡çš„åˆçº¦éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚æ ¹æ®å¤–éƒ¨æ•°æ®æºæ›´æ–°å˜é‡æˆ–ç®¡ç†è®¢é˜…ä»˜æ¬¾ã€‚\nè¿™äº›æœåŠ¡å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œä»¥é€šè¿‡æä¾›å¯é çš„éšæœºæ€§å’Œè‡ªåŠ¨åŒ–åˆçº¦æ‰§è¡Œæ¥å¢å¼ºå»ä¸­å¿ƒåŒ–åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒChainlink VRF å¯ä»¥ç”¨æ¥éšæœºåŒ– NFT çš„å…ƒæ•°æ®ï¼Œè€Œ Chainlink Automation å¯ä»¥ç”¨æ¥è®¾ç½® NFT å…ƒæ•°æ®æ­ç¤ºçš„è§¦å‘æ¡ä»¶ï¼Œä¾‹å¦‚é€šè¿‡æ‰¹é‡å¤§å°æˆ–æ—¶é—´é—´éš”å‚æ•°ã€‚\n","permalink":"http://localhost:1313/posts/chainlink-vrf-and-automation-services/","summary":"Chainlink VRF (Verifiable Random Function) and Chainlink Automation are two distinct services provided by Chainlink that offer different functionalities for smart contracts on blockchain networks.\nChainlink VRF is a provably fair and verifiable random number generator (RNG) designed for smart contracts that require a high degree of randomness, such as in gaming or for the random assignment of duties and resources. It generates random values along with cryptographic proof of how those values were determined.","title":"Chainlink VRF and Automation Services"},{"content":"In Solidity, the indexed modifier is used to declare parameters in events (event) and indicates that the value of the parameter should be indexed. The purpose of the indexed modifier is to create a searchable index for event parameters, allowing for more efficient filtering and retrieval of events. When a parameter is declared as indexed, the Solidity compiler creates an index for that parameter in the event log.\nHere are some key points about the indexed attribute in Solidity events:\nUsing indexed in Event Definitions: You can add the indexed attribute to parameters in your event definitions. Up to three parameters can be indexed. For example: event Transfer(address indexed _from, address indexed _to, uint indexed _amount); In the example above, both _from and _to parameters are set as indexed, meaning we can listen for these events and filter by these two parametersâ€™ values using Web3.js or Ethers.js.\nFiltering Events: With indexed parameters, we can filter events more precisely. Here are some examples:\nFiltering events where a certain address is the sender: let filter = this.contract_instance.filters.Transfer(this.active_wallet.address, null, null); this.contract_instance.on(filter, (from, to, value, event) =\u0026gt; { console.log(\u0026#34;Listening to Ether transfer events:\u0026#34;); console.log(`from: ${from} to: ${to} value: ${value}`); }); Filtering events where a certain address is the receiver: let filter = this.contract_instance.filters.Transfer(null, this.active_wallet.address, null); this.contract_instance.on(filter, (from, to, value, event) =\u0026gt; { console.log(\u0026#34;Listening to Ether transfer events:\u0026#34;); console.log(`from: ${from} to: ${to} value: ${value}`); }); Filtering events with a specific amount (note the value is in hexadecimal): // Filter for events with value of 100 let filter = this.contract_instance.filters.Transfer(null, null, \u0026#34;0x64\u0026#34;); // Filter for events with values in an array let filter = this.contract_instance.filters.Transfer(null, null, [\u0026#34;0x63\u0026#34;, \u0026#34;0x64\u0026#34;, \u0026#34;0x65\u0026#34;]); this.contract_instance.on(filter, (from, to, value, event) =\u0026gt; { console.log(\u0026#34;Listening to Ether transfer events:\u0026#34;); console.log(`from: ${from} to: ${to} value: ${value}`); }); In summary, the indexed attribute allows us to handle event parameters in Solidity more effectively, enhancing the flexibility and usability of events.\nåœ¨ Solidity ä¸­ï¼Œindexed ä¿®é¥°ç¬¦ç”¨äºå£°æ˜äº‹ä»¶ï¼ˆeventï¼‰ä¸­çš„å‚æ•°ï¼Œå¹¶æŒ‡ç¤ºå°†è¯¥å‚æ•°çš„å€¼è¿›è¡Œç´¢å¼•ã€‚indexed ä¿®é¥°ç¬¦çš„ä½œç”¨æ˜¯ä¸ºäº‹ä»¶å‚æ•°åˆ›å»ºä¸€ä¸ªå¯æœç´¢çš„ç´¢å¼•ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°è¿‡æ»¤å’Œæ£€ç´¢äº‹ä»¶ã€‚å½“ä¸€ä¸ªå‚æ•°è¢«å£°æ˜ä¸º indexed æ—¶ï¼ŒSolidity ç¼–è¯‘å™¨ä¼šåœ¨äº‹ä»¶çš„æ—¥å¿—ä¸­ä¸ºè¯¥å‚æ•°åˆ›å»ºä¸€ä¸ªç´¢å¼•ã€‚\nå…·ä½“æ¥è¯´ï¼Œindexed å±æ€§åœ¨ Solidity äº‹ä»¶ä¸­éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬åœ¨äº‹ä»¶å‚æ•°ä¸Šè¿›è¡Œå€¼è¿‡æ»¤ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³äº indexed å±æ€§çš„é‡è¦ä¿¡æ¯ï¼š\nå®šä¹‰äº‹ä»¶æ—¶ä½¿ç”¨ indexed å±æ€§ï¼š ä½ å¯ä»¥åœ¨äº‹ä»¶å®šä¹‰ä¸­çš„å‚æ•°ä¸Šå¢åŠ  indexed å±æ€§ã€‚æœ€å¤šå¯ä»¥å¯¹ä¸‰ä¸ªå‚æ•°å¢åŠ è¿™æ ·çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š event Transfer(address indexed _from, address indexed _to, uint indexed amount); åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ_from å’Œ _to å‚æ•°éƒ½è¢«è®¾ç½®ä¸º indexedï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ Web3.js æˆ– Ethers.js ä¸­é€šè¿‡å¯¹è¿™ä¸¤ä¸ªå‚æ•°è¿›è¡Œå€¼è¿‡æ»¤æ¥ç›‘å¬ç›¸åº”çš„äº‹ä»¶ã€‚\nè¿‡æ»¤äº‹ä»¶ï¼š é€šè¿‡ä½¿ç”¨ indexed å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ›´ç²¾ç¡®åœ°è¿‡æ»¤äº‹ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š\nè¿‡æ»¤æŸä¸ªåœ°å€ä¸ºå‘é€è€…çš„äº‹ä»¶ï¼š let filter = this.contract_instance.filters.Transfer(this.active_wallet.address, null, null); this.contract_instance.on(filter, (from, to, value, event) =\u0026gt; { console.log(\u0026#34;ç›‘å¬å‘é€ä»¥å¤ªåŠäº‹ä»¶:\u0026#34;); console.log(`from: ${from} + to: ${to} + value: ${value}`); }); è¿‡æ»¤æŸä¸ªåœ°å€ä¸ºæ¥æ”¶è€…çš„äº‹ä»¶ï¼š let filter = this.contract_instance.filters.Transfer(null, this.active_wallet.address, null); this.contract_instance.on(filter, (from, to, value, event) =\u0026gt; { console.log(\u0026#34;ç›‘å¬å‘é€ä»¥å¤ªåŠäº‹ä»¶:\u0026#34;); console.log(`from: ${from} + to: ${to} + value: ${value}`); }); è¿‡æ»¤æŒ‡å®šæ•°é‡çš„äº‹ä»¶ï¼ˆæ³¨æ„å‚æ•°å€¼æ˜¯åå…­è¿›åˆ¶ï¼‰ï¼š // è¿‡æ»¤ value ä¸º 100 çš„äº‹ä»¶ let filter = this.contract_instance.filters.Transfer(null, null, \u0026#34;0x100\u0026#34;); // è¿‡æ»¤ value ä¸ºæ•°ç»„ä¸­å€¼çš„äº‹ä»¶ let filter = this.contract_instance.filters.Transfer(null, null, [\u0026#34;0x99\u0026#34;, \u0026#34;0x100\u0026#34;, \u0026#34;0x101\u0026#34;]); this.contract_instance.on(filter, (from, to, value, event) =\u0026gt; { console.log(\u0026#34;ç›‘å¬å‘é€ä»¥å¤ªåŠäº‹ä»¶:\u0026#34;); console.log(`from: ${from} + to: ${to} + value: ${value}`); }); æ€»ä¹‹ï¼Œindexed å±æ€§ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´æœ‰æ•ˆåœ°å¤„ç† Solidity ä¸­çš„äº‹ä»¶å‚æ•°ï¼Œä»è€Œæé«˜äº†äº‹ä»¶çš„çµæ´»æ€§å’Œå¯ç”¨æ€§ã€‚\n","permalink":"http://localhost:1313/posts/the-solidity-indexed-modifier/","summary":"In Solidity, the indexed modifier is used to declare parameters in events (event) and indicates that the value of the parameter should be indexed. The purpose of the indexed modifier is to create a searchable index for event parameters, allowing for more efficient filtering and retrieval of events. When a parameter is declared as indexed, the Solidity compiler creates an index for that parameter in the event log.\nHere are some key points about the indexed attribute in Solidity events:","title":"The Solidity Indexed Modifier"},{"content":"To understand the differences betweenÂ ERC20Â andÂ ERC721, letâ€™s delve into their characteristics:\nFungibility vs. Non-Fungibility:\nERC20Â tokens areÂ fungible. This means that each token is identical and interchangeable with any other token of the same type. For example, if you have an ERC20 token representing a cryptocurrency, one unit of that token is equivalent to any other unit of the same token. ERC721Â tokens, on the other hand, areÂ non-fungible. Each token is unique and cannot be divided. These tokens represent ownership of specific, individual items.Â For instance, collectibles, game assets, and real estate can be represented using ERC721 tokens. Functionality:\nERC20Â tokens offer basic functions such as transfers and balance checks. They are commonly used for cryptocurrencies, utility tokens, and project ownership. ERC721Â tokens provide additional features beyond basic transfers. These features include owner tracking and metadata storage.Â They are primarily used for representing ownership and trading of unique digital assets. In summary,Â ERC20Â tokens are like moneyâ€”fungible and interchangeableâ€”whileÂ ERC721Â tokens are non-fungible and represent unique, indivisible assets. Understanding these differences is crucial when working with Ethereum tokens!\nè¦äº†è§£ ERC20 å’Œ ERC721 çš„åŒºåˆ«ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£å®ƒä»¬çš„ç‰¹ç‚¹ï¼š\nå¯äº’æ¢æ€§ä¸ä¸å¯äº’æ¢æ€§ï¼š ERC20 ä»£å¸æ˜¯å¯äº’æ¢çš„ã€‚è¿™æ„å‘³ç€æ¯ä¸ªä»£å¸éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¯ä»¥ä¸ä»»ä½•å…¶ä»–åŒç±»å‹ä»£å¸äº’æ¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªä»£è¡¨åŠ å¯†è´§å¸çš„ ERC20 ä»£å¸ï¼Œé‚£ä¹ˆè¯¥ä»£å¸çš„ä¸€ä¸ªå•ä½å°±ç­‰åŒäºç›¸åŒä»£å¸çš„ä»»ä½•å…¶ä»–å•ä½ã€‚ å¦ä¸€æ–¹é¢ï¼ŒERC721 ä»£å¸æ˜¯ä¸å¯å…‘æ¢çš„ã€‚æ¯ä¸ªä»£å¸éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸å¯åˆ†å‰²ã€‚è¿™äº›ä»£å¸ä»£è¡¨å¯¹ç‰¹å®šã€ä¸ªåˆ«ç‰©å“çš„æ‰€æœ‰æƒã€‚ä¾‹å¦‚ï¼Œæ”¶è—å“ã€æ¸¸æˆèµ„äº§å’Œæˆ¿åœ°äº§éƒ½å¯ä»¥ç”¨ ERC721 ä»£å¸æ¥è¡¨ç¤º 12ã€‚\nåŠŸèƒ½æ€§ï¼š ERC20 ä»£å¸æä¾›è½¬è´¦å’Œä½™é¢æŸ¥è¯¢ç­‰åŸºæœ¬åŠŸèƒ½ã€‚å®ƒä»¬é€šå¸¸ç”¨äºåŠ å¯†è´§å¸ã€å®ç”¨ä»£å¸å’Œé¡¹ç›®æ‰€æœ‰æƒã€‚ ERC721 ä»£å¸æä¾›åŸºæœ¬è½¬è´¦ä¹‹å¤–çš„å…¶ä»–åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½åŒ…æ‹¬æ‰€æœ‰è€…è·Ÿè¸ªå’Œå…ƒæ•°æ®å­˜å‚¨ã€‚å®ƒä»¬ä¸»è¦ç”¨äºä»£è¡¨ç‹¬ç‰¹æ•°å­—èµ„äº§çš„æ‰€æœ‰æƒå’Œäº¤æ˜“ã€‚\næ€»ä¹‹ï¼ŒERC20 ä»£å¸å°±åƒè´§å¸\u0026ndash;å¯æµé€šã€å¯äº’æ¢\u0026ndash;è€Œ ERC721 ä»£å¸ä¸å¯æµé€šï¼Œä»£è¡¨ç‹¬ä¸€æ— äºŒã€ä¸å¯åˆ†å‰²çš„èµ„äº§ 5ã€‚åœ¨ä½¿ç”¨ä»¥å¤ªåŠä»£å¸æ—¶ï¼Œäº†è§£è¿™äº›å·®å¼‚è‡³å…³é‡è¦ï¼\n","permalink":"http://localhost:1313/posts/differences-between-erc-20-and-erc-721/","summary":"To understand the differences betweenÂ ERC20Â andÂ ERC721, letâ€™s delve into their characteristics:\nFungibility vs. Non-Fungibility:\nERC20Â tokens areÂ fungible. This means that each token is identical and interchangeable with any other token of the same type. For example, if you have an ERC20 token representing a cryptocurrency, one unit of that token is equivalent to any other unit of the same token. ERC721Â tokens, on the other hand, areÂ non-fungible.","title":"Differences Between ERC 20 and ERC 721"},{"content":"How to implement Proof of Work (PoW) and Proof of Stake (PoS) algorithms for blockchain in Go? Here are the steps:\nDefine the block structure: Letâ€™s start by creating a new Go project and importing all the necessary packages to build our blockchain. Create a file named blockchain.go and import all the dependencies you need by saving the following code in it. First, you need to define the data structure of the block, including the Index, Timestamp, PrevHash, Data, Nonce, Difficulty, and Hash. The Hash field will store the hash value of the block, while the PrevHash field points to the hash of the previous block in the blockchain.\npackage blockchain\rimport (\r\u0026#34;bytes\u0026#34;\r\u0026#34;crypto/sha256\u0026#34;\r\u0026#34;encoding/hex\u0026#34;\r\u0026#34;strconv\u0026#34;\r\u0026#34;time\u0026#34;\r)\r// Block represents a block in the blockchain.\rtype Block struct {\rIndex int\rTimestamp int64\rPrevHash string\rData string\rNonce int\rDifficulty int\rHash string\r} Create a hash function: The security of the blockchain depends on the hash function. You need to create a function to calculate the hash value of a block, usually using the SHA-256 algorithm.\nfunc calculateHash(block Block) string {\rrecord := strconv.Itoa(block.Index) + strconv.FormatInt(block.Timestamp, 10) +\rblock.PrevHash + block.Data + strconv.Itoa(block.Nonce)\rhash := sha256.Sum256([]byte(record))\rreturn hex.EncodeToString(hash[:])\r} Implement the PoW algorithm: Proof-of-Work algorithms require miners to solve a mathematical puzzle to prove that they put in the work. This usually involves adjusting a block\u0026rsquo;s value until its hash satisfies a specific condition (e.g., starts with a certain number of zeros).\nCreating the POW Genesis Block The genesis block is the first block in the blockchain and serves as the starting point. It has a fixed set of values and does not refer to any previous block. Letâ€™s create a function to generate the genesis block in a file named pow_genesis.go package blockchain\rimport (\r\u0026#34;time\u0026#34;\r)\r// createGenesisBlock creates the first block in the blockchain (genesis block).\rfunc CreateGenesisBlock(difficulty int) Block {\rtimestamp := time.Now().Unix()\rgenesisBlock := Block{\rIndex: 0,\rTimestamp: timestamp,\rPrevHash: \u0026#34;0\u0026#34;,\rData: \u0026#34;Genesis Block\u0026#34;,\rNonce: 0,\rDifficulty: difficulty,\r}\rgenesisBlock.Hash = CalculateHash(genesisBlock)\rreturn genesisBlock\r} The CreateGenesisBlock function generates the genesis block with a given difficulty level. It sets the PrevHash value to \u0026ldquo;0\u0026rdquo; and calculates the hash using the CalculateHash function.\nGenerating a New Block with Proof of Work Next, weâ€™ll implement the GenerateNewBlockWithPoW function, which generates a new block in the blockchain based on the previous block and the provided data using the Proof of Work algorithm. Open a new file named pow.go and include the following code: package blockchain\rimport (\r\u0026#34;math\u0026#34;\r\u0026#34;math/big\u0026#34;\r\u0026#34;time\u0026#34;\r)\r// GenerateNewBlockWithPoW generates a new block in the blockchain using Proof of Work.\rfunc GenerateNewBlockWithPoW(prevBlock Block, data string, difficulty int) Block {\rvar nonce int\rtimestamp := time.Now().Unix()\rnewBlock := Block{\rIndex: prevBlock.Index + 1,\rTimestamp: timestamp,\rPrevHash: prevBlock.Hash,\rData: data,\rNonce: 0,\rDifficulty: difficulty,\r}\r// Perform the proof of work\rtarget := big.NewInt(1)\rtarget.Lsh(target, uint(256-difficulty))\rfor nonce \u0026lt; math.MaxInt64 {\rnewBlock.Nonce = nonce\rhash := CalculateHash(newBlock)\rhashInt := new(big.Int)\rhashInt.SetString(hash, 16)\rif hashInt.Cmp(target) == -1 {\rnewBlock.Hash = hash\rbreak\r} else {\rnonce++\r}\r}\rreturn newBlock\r} The GenerateNewBlockWithPoW function takes the previous block, new data, and the desired difficulty level as parameters. It initializes a new block with the appropriate values and performs the proof of work calculation. The target value represents the threshold that the block\u0026rsquo;s hash must meet to satisfy the difficulty level. The function continues to increment the Nonce until a suitable hash is found.\nImplementing PoS algorithms: Proof-of-Stake algorithms are an alternative consensus mechanism that selects nodes to create new blocks based on the amount of currency a user holds and how long they have held it.\nCreating the Genesis Block package blockchain\rimport (\r\u0026#34;time\u0026#34;\r)\r// CreateGenesisBlockForPoS creates the first block in the blockchain (genesis block) for Proof of Stake.\rfunc CreateGenesisBlockForPoS(difficulty int) Block {\rtimestamp := time.Now().Unix()\rgenesisBlock := Block{\rIndex: 0,\rTimestamp: timestamp,\rPrevHash: \u0026#34;0\u0026#34;,\rData: \u0026#34;Genesis Block\u0026#34;,\rNonce: 0,\rDifficulty: difficulty,\r}\rgenesisBlock.Hash = CalculateHash(genesisBlock)\rreturn genesisBlock\r} Generating a New Block with Proof of Stake Next, weâ€™ll implement the GenerateNewBlockWithPos function, which generates a new block in the blockchain based on the previous block and the provided data using the Proof of Stake algorithm. Open a new file named pos.go and include the following code:\npackage blockchain\rimport (\r\u0026#34;math/rand\u0026#34;\r\u0026#34;time\u0026#34;\r)\r// GenerateNewBlockWithPoS generates a new block in the blockchain using Proof of Stake.\rfunc GenerateNewBlockWithPoS(prevBlock Block, data string, difficulty int, validators []string) Block {\rtimestamp := time.Now().Unix()\rnewBlock := Block{\rIndex: prevBlock.Index + 1,\rTimestamp: timestamp,\rPrevHash: prevBlock.Hash,\rData: data,\rNonce: 0,\rDifficulty: difficulty,\r}\r// Select a random validator\rrand.Seed(time.Now().UnixNano())\rvalidatorIndex := rand.Intn(len(validators))\rvalidator := validators[validatorIndex]\rnewBlock.Hash = CalculateHashWithValidator(newBlock, validator)\rreturn newBlock\r} Testing and validation: create unit tests to verify that your algorithm is correct. Ensure that the blockchain can be properly synchronized across different nodes.\npackage main\rimport (\r\u0026#34;fmt\u0026#34;\r\u0026#34;github.com/CharlieChen01/BlockchainBasic/blockchain\u0026#34;\r)\rfunc main() {\rdifficulty := 3 // Adjust the difficulty level as needed\r// Test Proof of Work\rpowBlockchain := []blockchain.Block{blockchain.CreateGenesisBlock(difficulty)}\r// Generate a new block with some data using Proof of Work\rnewBlockData := \u0026#34;Block Data\u0026#34;\rnewPowBlock := blockchain.GenerateNewBlockWithPoW(powBlockchain[len(powBlockchain)-1], newBlockData, difficulty)\rpowBlockchain = append(powBlockchain, newPowBlock)\r// Print the Proof of Work blockchain\rfmt.Println(\u0026#34;Proof of Work Blockchain:\u0026#34;)\rfor _, block := range powBlockchain {\rfmt.Printf(\u0026#34;Index: %d\\n\u0026#34;, block.Index)\rfmt.Printf(\u0026#34;Timestamp: %d\\n\u0026#34;, block.Timestamp)\rfmt.Printf(\u0026#34;PrevHash: %s\\n\u0026#34;, block.PrevHash)\rfmt.Printf(\u0026#34;Data: %s\\n\u0026#34;, block.Data)\rfmt.Printf(\u0026#34;Nonce: %d\\n\u0026#34;, block.Nonce)\rfmt.Printf(\u0026#34;Difficulty: %d\\n\u0026#34;, block.Difficulty)\rfmt.Printf(\u0026#34;Hash: %s\\n\\n\u0026#34;, block.Hash)\r}\r// Test Proof of Stake\rposBlockchain := []blockchain.Block{blockchain.CreateGenesisBlockForPoS(difficulty)}\r// Generate a new block with some data using Proof of Stake\rnewPosBlock := blockchain.GenerateNewBlockWithPoS(posBlockchain[len(posBlockchain)-1], newBlockData, difficulty, []string{\u0026#34;Validator 1\u0026#34;, \u0026#34;Validator 2\u0026#34;, \u0026#34;Validator 3\u0026#34;})\rposBlockchain = append(posBlockchain, newPosBlock)\r// Print the Proof of Stake blockchain\rfmt.Println(\u0026#34;Proof of Stake Blockchain:\u0026#34;)\rfor _, block := range posBlockchain {\rfmt.Printf(\u0026#34;Index: %d\\n\u0026#34;, block.Index)\rfmt.Printf(\u0026#34;Timestamp: %d\\n\u0026#34;, block.Timestamp)\rfmt.Printf(\u0026#34;PrevHash: %s\\n\u0026#34;, block.PrevHash)\rfmt.Printf(\u0026#34;Data: %s\\n\u0026#34;, block.Data)\rfmt.Printf(\u0026#34;Nonce: %d\\n\u0026#34;, block.Nonce)\rfmt.Printf(\u0026#34;Difficulty: %d\\n\u0026#34;, block.Difficulty)\rfmt.Printf(\u0026#34;Hash: %s\\n\\n\u0026#34;, block.Hash)\r}\r} ","permalink":"http://localhost:1313/posts/how-to-implement-the-pow-and-pos-algorithms-in-go/","summary":"How to implement Proof of Work (PoW) and Proof of Stake (PoS) algorithms for blockchain in Go? Here are the steps:\nDefine the block structure: Letâ€™s start by creating a new Go project and importing all the necessary packages to build our blockchain. Create a file named blockchain.go and import all the dependencies you need by saving the following code in it. First, you need to define the data structure of the block, including the Index, Timestamp, PrevHash, Data, Nonce, Difficulty, and Hash.","title":"How to Implement the PoW and PoS Algorithms in Go"}]